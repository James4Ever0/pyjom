(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
    typeof define === 'function' && define.amd ? define(['IxIterable'], factory) :
    (factory(global.IxIterable = global.IxIterable || {}));
}(this, (function (exports) {/*
 *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
*****************************************************************************/
function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var ba="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
function ca(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var l=ca(this);function da(a,b){if(b)a:{var c=l;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ba(c,a,{configurable:!0,writable:!0,value:b})}}
da("Symbol",function(a){function b(f){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c(d+(f||"")+"_"+e++,f)}function c(f,g){this.ga=f;ba(this,"description",{configurable:!0,writable:!0,value:g})}if(a)return a;c.prototype.toString=function(){return this.ga};var d="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",e=0;return b});
da("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=l[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&ba(d.prototype,a,{configurable:!0,writable:!0,value:function(){return ea(aa(this))}})}return a});da("Symbol.asyncIterator",function(a){return a?a:Symbol("Symbol.asyncIterator")});
function ea(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}function n(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}var fa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ha;
if("function"==typeof Object.setPrototypeOf)ha=Object.setPrototypeOf;else{var ia;a:{var ja={a:!0},ka={};try{ka.__proto__=ja;ia=ka.a;break a}catch(a){}ia=!1}ha=ia?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var q=ha;
function r(a,b){a.prototype=fa(b.prototype);a.prototype.constructor=a;if(q)q(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.ua=b.prototype}function la(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");}function t(){this.M=!1;this.v=null;this.l=void 0;this.h=1;this.A=this.J=0;this.ca=this.s=null}
function ma(a){if(a.M)throw new TypeError("Generator is already running");a.M=!0}t.prototype.N=function(a){this.l=a};t.prototype.O=function(a){this.s={ba:a,ea:!0};this.h=this.J||this.A};t.prototype.return=function(a){this.s={return:a};this.h=this.A};function w(a,b,c){a.h=c;return{value:b}}function na(a,b,c){b=n(b);var d=b.next();la(d);if(d.done)a.l=d.value,a.h=c;else return a.v=b,w(a,d.value,c)}t.prototype.g=function(a){this.h=a};function oa(a){a.J=2;a.A=3}function pa(a){a.J=0;a.A=2}
function qa(a){a.J=0;var b=a.s.ba;a.s=null;return b}function x(a){a.ca=[a.s];a.J=0;a.A=0}function y(a){var b=a.ca.splice(0)[0];(b=a.s=a.s||b)?b.ea?a.h=a.J||a.A:void 0!=b.g&&a.A<b.g?(a.h=b.g,a.s=null):a.h=a.A:a.h=0}function z(a){this.j=new t;this.sa=a}z.prototype.N=function(a){ma(this.j);if(this.j.v)return ra(this,this.j.v.next,a,this.j.N);this.j.N(a);return B(this)};
function sa(a,b){ma(a.j);var c=a.j.v;if(c)return ra(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.j.return);a.j.return(b);return B(a)}z.prototype.O=function(a){ma(this.j);if(this.j.v)return ra(this,this.j.v["throw"],a,this.j.N);this.j.O(a);return B(this)};function ra(a,b,c,d){try{var e=b.call(a.j.v,c);la(e);if(!e.done)return a.j.M=!1,e;var f=e.value}catch(g){return a.j.v=null,a.j.O(g),B(a)}a.j.v=null;d.call(a.j,f);return B(a)}
function B(a){for(;a.j.h;)try{var b=a.sa(a.j);if(b)return a.j.M=!1,{value:b.value,done:!1}}catch(c){a.j.l=void 0,a.j.O(c)}a.j.M=!1;if(a.j.s){b=a.j.s;a.j.s=null;if(b.ea)throw b.ba;return{value:b.return,done:!0}}return{value:void 0,done:!0}}function ta(a){this.next=function(b){return a.N(b)};this.throw=function(b){return a.O(b)};this.return=function(b){return sa(a,b)};this[Symbol.iterator]=function(){return this}}function C(a,b){b=new ta(new z(b));q&&a.prototype&&q(b,a.prototype);return b}
function ua(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function f(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(f,e)}f(a.next())})}function D(a){return ua(new ta(new z(a)))}function va(a){var b=a[Symbol.asyncIterator];return void 0!==b?b.call(a):new wa(n(a))}
function wa(a){this[Symbol.asyncIterator]=function(){return this};this[Symbol.iterator]=function(){return a};this.next=function(b){return Promise.resolve(a.next(b))};void 0!==a["throw"]&&(this["throw"]=function(b){return Promise.resolve(a["throw"](b))});void 0!==a["return"]&&(this["return"]=function(b){return Promise.resolve(a["return"](b))})}function F(a,b){this.action=a;this.value=b}function xa(a,b,c,d){this.method=a;this.G=b;this.resolve=c;this.reject=d}
function ya(a){this.frame=a;this.next=null}function za(){this.T=this.B=null}za.prototype.isEmpty=function(){return null===this.B};za.prototype.first=function(){if(this.B)return this.B.frame;throw Error("no frames in executionQueue");};function H(a){a.B&&(a.B=a.B.next,a.B||(a.T=null))}za.prototype.enqueue=function(a){a=new ya(a);this.T?this.T.next=a:this.B=a;this.T=a};
function I(a){this.da=a;this.o=null;this.m=new za;this[Symbol.asyncIterator]=function(){return this};var b=this;this.pa=function(c){var d=b.m.first();!0===c.done?(b.o=null,d.method="next",d.G=c.value):(d.resolve({value:c.value,done:!1}),H(b.m));J(b)};this.oa=function(c){Aa(b,c)};this.Y=function(c){Ba(b,c)}}function Ca(a,b,c){return new Promise(function(d,e){var f=a.m.isEmpty();a.m.enqueue(new xa(b,c,d,e));f&&J(a)})}I.prototype.next=function(a){return Ca(this,"next",a)};
I.prototype.return=function(a){return Ca(this,"return",new F(0,a))};I.prototype.throw=function(a){return Ca(this,"throw",a)};function J(a){if(!a.m.isEmpty())try{if(a.o){if(!a.o)throw Error("no delegate to perform execution");var b=a.m.first();if(b.method in a.o)try{a.o[b.method](b.G).then(a.pa,a.oa).catch(a.Y)}catch(c){Aa(a,c)}else a.o=null,J(a)}else Da(a)}catch(c){Ba(a,c)}}
function Da(a){var b=a.m.first();try{var c=a.da[b.method](b.G);if(c.value instanceof F)switch(c.value.action){case 0:Promise.resolve(c.value.value).then(function(d){b.resolve({value:d,done:c.done});H(a.m);J(a)},function(d){b.reject(d);H(a.m);J(a)}).catch(a.Y);break;case 1:a.o=va(c.value.value);b.method="next";b.G=void 0;J(a);break;case 2:Promise.resolve(c.value.value).then(function(d){b.method="next";b.G=d;J(a)},function(d){b.method="throw";b.G=d;J(a)}).catch(a.Y);break;default:throw Error("Unrecognized AsyncGeneratorWrapper$ActionEnum");
}else b.resolve(c),H(a.m),J(a)}catch(d){b.reject(d),H(a.m),J(a)}}function Aa(a,b){var c=a.m.first();a.o=null;c.method="throw";c.G=b;J(a)}function Ba(a,b){a.m.isEmpty()||(a.m.first().reject(b),H(a.m));a.o&&"return"in a.o&&(a.o["return"](void 0),a.o=null);a.da["return"](void 0);J(a)}function Ea(a){return this instanceof Ea?this:new Ea(a)};function K(a){return a}function L(a){return D(function(b){return b.return(a)})};function Fa(a,b){return"undefined"===typeof b?a:function(c,d){return a.call(b,c,d)}};function M(a){return"function"===typeof a}function N(a){return null!=a&&Object(a)===a}function Ga(a){return N(a)&&"number"===typeof a.length}function O(a){return null!=a&&M(a[Symbol.iterator])}function Ha(a){return N(a)&&!M(a[Symbol.iterator])&&M(a.next)}function Ia(a){return null!=a&&Object(a)===a&&"function"===typeof a.subscribe}function Ja(a){return N(a)&&M(a.pipe)&&M(a._read)&&"boolean"===typeof a.readable&&N(a._readableState)}
function Ka(a){return N(a)&&M(a.end)&&M(a._write)&&"boolean"===typeof a.writable&&N(a._writableState)};function La(a){a=Number(a);return isNaN(a)?0:0!==a&&isFinite(a)?(0<a?1:-1)*Math.floor(Math.abs(a)):a};var Ma=Math.pow(2,53)-1;var Na,P;
function Pa(a){function b(c,d){var e=a.call(this)||this;e.i=c;e.H=d;return e}Na=function(c,d,e){d=void 0===d?K:d;d=Fa(d,e);if(O(c)||Ga(c))return new P(c,d);if(Ha(c))return e={},new P((e[Symbol.iterator]=function(){return c},e),d);throw new TypeError("Input type not supported");};r(b,a);b.prototype[Symbol.iterator]=function d(){var e=this,f,g,h,k,m,u,v;return C(d,function(p){switch(p.h){case 1:f=O(e.i);g=0;if(f){p.g(2);break}h=Math.min(Math.max(La(e.i.length),0),Ma);case 4:if(!(g<h)){p.g(0);break}k=
e.i[g];return w(p,e.H(k,g++),4);case 2:m=n(e.i),u=m.next();case 7:if(u.done){p.g(0);break}v=u.value;return w(p,e.H(v,g++),8);case 8:u=m.next(),p.g(7)}})};P=b};function Q(){}Q.prototype.forEach=function(a,b){a=Fa(a,b);b=0;for(var c=n(this),d=c.next();!d.done;d=c.next())a(d.value,b++)};Q.prototype.pipe=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];c=-1;for(var d=b.length,e=this;++c<d;)e=b[c](Qa(e));return e};Q.prototype[Symbol.toStringTag]="IterableX";Object.defineProperty(Q,Symbol.hasInstance,{writable:!0,configurable:!0,value:function(a){return!(!a||"IterableX"!==a[Symbol.toStringTag])}});Pa(Q);
try{(function(a){a||(Q.prototype.pipe=function(b){for(var c=[],d=0;d<arguments.length;++d)c[d-0]=arguments[d];for(var e=-1,f=c.length,g=this;++e<f;)if(d=c[e],"function"===typeof d)g=d(Qa(g));else if(Ka(d)){c=c[e+1]||{};e=void 0===c.end?!0:c.end;if(Ja(g))d=g.pipe(d,{end:e});else{c=d;e={end:e};g=Qa(g);f=g.ta;var h=void 0;h=void 0===h?d.na||{ra:!0}:h;d=f.call(g,h).pipe(c,e)}return d}return g})})("object"===typeof window&&"object"===typeof document&&9===document.nodeType)}catch(a){};function Qa(a){return a instanceof Q?a:"string"===typeof a?new P([a],K):O(a)||Ga(a)?new P(a,K):new P([a],K)};function Ra(a){"function"===typeof a.return&&a.return()};function R(a){this.i=a}r(R,Q);R.prototype[Symbol.iterator]=function Sa(){var b,c,d=this,e,f,g,h,k,m,u,v;return C(Sa,function(p){switch(p.h){case 1:b=null,c=!1,e=n(d.i),f=e.next();case 2:if(f.done){p.g(4);break}g=f.value;h=g[Symbol.iterator]();b=null;c=!1;case 5:k={};try{m=h.next();u=m.done;v=m.value;if(u){Ra(h);p.g(6);break}k=v}catch(E){b=E;c=!0;Ra(h);p.g(6);break}return w(p,k,5);case 6:if(!c){p.g(4);break}f=e.next();p.g(2);break;case 4:if(c)throw b;p.h=0}})};function Ta(a){this.i=a}r(Ta,Q);Ta.prototype[Symbol.iterator]=function Ua(){var b=this,c,d,e;return C(Ua,function(f){1==f.h&&(c=n(b.i),d=c.next());if(3!=f.h){if(d.done)return f.g(0);e=d.value;return na(f,e,3)}d=c.next();return f.g(2)})};function Va(a){this.H=a}r(Va,Q);Va.prototype[Symbol.iterator]=function(){return this.H()};function Wa(a){this.H=a}r(Wa,Q);Wa.prototype[Symbol.iterator]=function Xa(){var b=this,c,d,e;return C(Xa,function(f){1==f.h&&(c=n(b.H()),d=c.next());if(3!=f.h){if(d.done)return f.g(0);e=d.value;return w(f,e,3)}d=c.next();return f.g(2)})};function Ya(a){return new Wa(a)};function Za(){}r(Za,Q);Za.prototype[Symbol.iterator]=function $a(){return C($a,function(b){b.h=0})};function ab(){return new Za};function bb(a,b,c,d){this.ia=a;this.V=b;this.ja=c;this.la=d}r(bb,Q);bb.prototype[Symbol.iterator]=function cb(){var b=this,c;return C(cb,function(d){1==d.h&&(c=b.ia);if(3!=d.h)return b.V(c)?w(d,b.la(c),3):d.g(0);c=b.ja(c);return d.g(2)})};function db(a,b){return a===b||"number"===typeof a&&"number"===typeof b&&isNaN(a)&&isNaN(b)}function eb(a,b){return a>b?1:a<b?-1:0};function fb(a,b,c){var d=[];a=a[Symbol.iterator]();var e=a.next(),f=e.value;if(e.done)throw Error("Sequence contains no elements");e=b(f);for(d.push(f);!(f=a.next()).done;){f=f.value;var g=b(f),h=c(g,e);0===h?d.push(f):0<h&&(d=[f],e=g)}return d};function gb(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];return new hb(b)}function hb(a){this.ha=a}r(hb,Q);hb.prototype[Symbol.iterator]=function ib(){var b=this;return C(ib,function(c){return na(c,b.ha,0)})};function jb(a){this.i=a}r(jb,Q);jb.prototype[Symbol.iterator]=function kb(){var b=this,c,d,e,f,g;return C(kb,function(h){switch(h.h){case 1:c=n(b.i),d=c.next();case 2:if(d.done){h.g(0);break}e=d.value;f=e[Symbol.iterator]();case 5:g=void 0;try{g=f.next()}catch(k){h.g(3);break}if(g.done){h.g(3);break}return w(h,g.value,5);case 3:d=c.next(),h.g(2)}})};function lb(a,b){this.$=a;this.C=b}r(lb,Q);lb.prototype[Symbol.iterator]=function mb(){var b=this,c,d;return C(mb,function(e){1==e.h&&(c=b.$,d=b.$+b.C);if(3!=e.h)return c<d?w(e,c,3):e.g(0);c++;return e.g(2)})};function nb(a){var b=[];a=n(a);for(var c=a.next();!c.done;c=a.next())b.push(c.value);return b};function ob(a,b){this.i=a;this.C=b}r(ob,Q);ob.prototype[Symbol.iterator]=function pb(){var b=this,c,d,e,f,g,h;return C(pb,function(k){switch(k.h){case 1:if(-1===b.C){k.g(11);break}c=0;case 4:if(!(c<b.C)){k.g(0);break}d=n(b.i);e=d.next();case 7:if(e.done){c++;k.g(4);break}f=e.value;return w(k,f,8);case 8:e=d.next();k.g(7);break;case 11:g=n(b.i),e=g.next();case 13:if(e.done){k.g(11);break}h=e.value;return w(k,h,14);case 14:e=g.next(),k.g(13)}})};function rb(a){this.D=a}r(rb,Q);rb.prototype[Symbol.iterator]=function sb(){var b=this;return C(sb,function(){throw b.D;})};function S(){this.W=!1;this.X=[];this.L=[]}S.prototype[Symbol.asyncIterator]=function(){return this};S.prototype.write=function(a){tb(this,{type:"value",value:a})};S.prototype.error=function(a){tb(this,{type:"error",error:a})};function tb(a,b){if(a.W)throw Error("AsyncSink already ended");if(0<a.L.length){var c=a.L.shift();a=c.resolve;c=c.reject;"error"===b.type?c(b.error):a({done:!1,value:b.value})}else a.X.push(b)}
S.prototype.next=function(){var a=this;if(0<this.X.length){var b=this.X.shift(),c=b.value,d=b.error;return"error"===b.type?Promise.reject(d):Promise.resolve({done:!1,value:c})}return this.W?Promise.resolve({done:!0}):new Promise(function(e,f){a.L.push({resolve:e,reject:f})})};S.prototype.end=function(){for(;0<this.L.length;)this.L.shift().resolve({done:!0});this.W=!0};function T(a){a=Error.call(this,void 0===a?"The operation has been aborted":a);this.message=a.message;"stack"in a&&(this.stack=a.stack);Object.setPrototypeOf(this,T.prototype);Error.captureStackTrace(this,this.constructor);this.name="AbortError"}r(T,Error);l.Object.defineProperty(T.prototype,Symbol.toStringTag,{configurable:!0,enumerable:!0,get:function(){return"AbortError"}});function ub(a){if(a&&a.aborted)throw new T;}
Object.defineProperty(T,Symbol.hasInstance,{writable:!0,configurable:!0,value:function(a){return N(a)&&("AbortError"===a.constructor.name||"AbortError"===a[Symbol.toStringTag])}});var vb,U,wb,xb,yb;function V(a){this.C=0;this.R=a;this.K=new Map}V.prototype.clear=function(){this.K.clear()};V.prototype.done=function(){this.R--};V.prototype.get=function(a){if(!this.K.has(a))throw Error("Element no longer available in the buffer.");var b=this.K.get(a),c=b.value;0===--b.count&&this.K.delete(a);return c};V.prototype.push=function(a){this.K.set(this.C++,{value:a,count:this.R})};
l.Object.defineProperties(V.prototype,{count:{configurable:!0,enumerable:!0,get:function(){return this.C}},fa:{configurable:!0,enumerable:!0,get:function(){return this.R},set:function(a){this.R=a}}});function zb(a){this.I=!1;this.i=a;this.u=new V(0)}r(zb,Q);zb.prototype.P=function Ab(a){var c,d,e=this,f;return C(Ab,function(g){switch(g.h){case 1:pa(g);case 4:c=!1;d={};if(a>=e.u.count){if(!e.I)try{if(f=e.i.next(),c=!f.done)d=f.value}catch(h){e.D=h,e.I=!0}if(e.I){if(e.D)throw e.D;g.g(2);break}c&&e.u.push(d)}else c=!0;if(!c){g.g(2);break}return w(g,e.u.get(a),6);case 6:a++;g.g(4);break;case 2:x(g),e.u.done(),y(g)}})};zb.prototype[Symbol.iterator]=function(){this.u.fa++;return this.P(this.u.count)[Symbol.iterator]()};
function Bb(){return function(a){return new zb(a[Symbol.iterator]())}};function Cb(a){return a instanceof W?a:"string"===typeof a?new U([a],L):O(a)||N(a)&&M(a[Symbol.asyncIterator])?new wb(a,L):N(a)&&M(a.then)?new xb(a,L):Ia(a)?new yb(a,L):Ga(a)?new U(a,L):new U([a],L)};function Db(a,b){this.i=a;this.ma=b}Db.prototype[Symbol.asyncIterator]=function(){return this.i[Symbol.asyncIterator](this.ma)};function W(){}W.prototype.forEach=function(a,b,c){var d=this,e,f,g,h,k;return D(function(m){1==m.h&&(e=c?new Db(d,c):d,f=0,g=va(e));if(5!=m.h)return w(m,g.next(),5);h=m.l;if(h.done)return m.g(0);k=h.value;return w(m,a.call(b,k,f++,c),2)})};
W.prototype.pipe=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];c=-1;for(var d=b.length,e=this;++c<d;)e=b[c](Cb(e));return e};W.prototype[Symbol.toStringTag]="AsyncIterableX";Object.defineProperty(W,Symbol.hasInstance,{writable:!0,configurable:!0,value:function(a){return!(!a||"AsyncIterableX"!==a[Symbol.toStringTag])}});
(function(a){function b(f,g){var h=a.call(this)||this;h.ka=f;h.F=g;return h}function c(f,g){var h=a.call(this)||this;h.i=f;h.F=g;return h}function d(f,g){var h=a.call(this)||this;h.i=f;h.F=g;return h}function e(f,g){var h=a.call(this)||this;h.i=f;h.F=g;return h}vb=function(f){var g=void 0===g?L:g;g=Fa(g,void 0);if(O(f)||N(f)&&M(f[Symbol.asyncIterator]))return new wb(f,g);if(N(f)&&M(f.then))return new xb(f,g);if(Ia(f))return new yb(f,g);if(Ga(f))return new U(f,g);if(Ha(f)){var h={};return new wb((h[Symbol.asyncIterator]=
function(){return f},h),g)}throw new TypeError("Input type not supported");};r(e,a);e.prototype[Symbol.asyncIterator]=function(){var f=this;return new I(function h(){var k,m,u,v;return C(h,function(p){1==p.h&&(k=0,m=Math.min(Math.max(La(f.i.length),0),Ma));if(5!=p.h){if(!(k<m))return p.g(0);u=F;v=0;return w(p,new F(2,f.F(f.i[k],k++)),5)}return w(p,new u(v,p.l),2)})}())};U=e;r(d,a);d.prototype[Symbol.asyncIterator]=function(){var f=this;return new I(function h(){var k,m,u,v,p,E;return C(h,function(A){switch(A.h){case 1:k=
0,m=va(f.i);case 2:return w(A,new F(2,m.next()),5);case 5:u=A.l;if(u.done){A.g(0);break}v=u.value;p=F;E=0;return w(A,new F(2,f.F(v,k++)),7);case 7:return w(A,new p(E,A.l),2)}})}())};wb=d;r(c,a);c.prototype[Symbol.asyncIterator]=function(){var f=this;return new I(function h(){var k,m,u;return C(h,function(v){return 1==v.h?w(v,new F(2,f.i),2):4!=v.h?(k=v.l,m=F,u=0,w(v,new F(2,f.F(k,0)),4)):w(v,new m(u,v.l),0)})}())};xb=c;r(b,a);b.prototype[Symbol.asyncIterator]=function(f){var g=this;return new I(function k(){function m(){u.error(new T)}
var u,v,p,E,A,qb;return C(k,function(G){switch(G.h){case 1:ub(f),u=new S,v=g.ka.subscribe({next:function(Oa){u.write(Oa)},error:function(Oa){u.error(Oa)},complete:function(){u.end()}}),f&&f.addEventListener("abort",m),p=0,pa(G),E=void 0;case 4:return w(G,new F(2,u.next()),7);case 7:if((E=G.l).done){G.g(2);break}ub(f);A=F;qb=0;return w(G,new F(2,g.F(E.value,p++)),9);case 9:return w(G,new A(qb,G.l),4);case 2:x(G),f&&f.removeEventListener("abort",m),v.unsubscribe(),y(G)}})}())};yb=b})(W);
try{(function(a){a||(W.prototype.pipe=function(b){for(var c=[],d=0;d<arguments.length;++d)c[d-0]=arguments[d];for(var e=-1,f=c.length,g=this;++e<f;)if(d=c[e],"function"===typeof d)g=d(Cb(g));else if(Ka(d)){c=c[e+1]||{};e=void 0===c.end?!0:c.end;if(Ja(g))d=g.pipe(d,{end:e});else{c=d;e={end:e};g=Cb(g);f=g.ta;var h=void 0;h=void 0===h?d.na||{ra:!0}:h;d=f.call(g,h).pipe(c,e)}return d}return g})})("object"===typeof window&&"object"===typeof document&&9===document.nodeType)}catch(a){};function X(a,b){this.S=this.D=null;this.I=!1;this.i=a;this.u=b}r(X,W);X.prototype[Symbol.asyncIterator]=function(a){ub(a);return this.P(0)};
X.prototype.P=function(a){a=void 0===a?0:a;var b=this;return new I(function d(){var e,f,g,h;return C(d,function(k){switch(k.h){case 1:e=a-1,f=!1,g=b.u,pa(k);case 4:if(!(++e<g.count)){k.g(7);break}return w(k,new F(0,g.get(e)),8);case 8:k.g(6);break;case 7:if(b.I)throw b.D;null===b.S&&(b.S=b.i.next().then(function(m){b.S=null;m.done||g.push(m.value);return m}));return w(k,new F(2,b.S.catch(function(m){b.D=m;b.I=!0;throw m;})),9);case 9:h=k.l;if(f=h.done){k.g(6);break}return w(k,new F(0,g.get(e)),6);
case 6:if(!f){k.g(4);break}case 2:x(k),g.done(),y(k)}})}())};function Eb(a){X.call(this,a,new V(0))}r(Eb,X);Eb.prototype[Symbol.asyncIterator]=function(a){ub(a);this.u.fa++;return this.P(this.u.count)[Symbol.asyncIterator]()};function Fb(){return function(a){return new Eb(a[Symbol.asyncIterator]())}};var Gb="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function Y(a){this.aa=a}r(Y,W);Y.prototype[Symbol.asyncIterator]=function(){var a=this.aa,b=a.getReader();return Hb(a,b,Ib(b))};function Jb(){Y.apply(this,arguments)}r(Jb,Y);Jb.prototype[Symbol.asyncIterator]=function(){var a=this.aa;try{var b=a.getReader({mode:"byob"})}catch(c){return Y.prototype[Symbol.asyncIterator].call(this)}a=Hb(a,b,Kb(b));a.next();return a};
function Hb(a,b,c){return new I(function e(){var f,g;return C(e,function(h){switch(h.h){case 1:return f=!1,oa(h),w(h,new F(1,c),3);case 3:x(h);if(!b){h.g(6);break}if(f){h.g(7);break}return w(h,new F(2,b.cancel()),7);case 7:if(a.locked)try{b.closed.catch(function(){}),b.releaseLock()}catch(k){}case 6:y(h);break;case 2:g=qa(h);if(f=!0,b)return w(h,new F(2,b.cancel(g)),3);h.g(3)}})}())}
function Ib(a){return new I(function c(){var d;return C(c,function(e){return 1==e.h?w(e,new F(2,a.read()),4):(d=e.l).done?e.g(0):w(e,new F(0,d.value),1)})}())}function Kb(a){return new I(function c(){var d,e;return C(c,function(f){switch(f.h){case 1:return w(f,new F(0,null),2);case 2:e=f.l;case 3:return w(f,new F(2,Lb(a,e)),5);case 5:if((d=f.l).done){f.g(0);break}return w(f,new F(0,d.value),6);case 6:e=f.l,f.g(3)}})}())}
function Lb(a,b){var c,d;return D(function(e){if(1==e.h){if("number"===typeof b)d=new ArrayBuffer(c=b);else if(b instanceof ArrayBuffer)c=(d=b).byteLength;else if(b instanceof Gb)c=(d=b).byteLength;else return e.return({done:!0,value:void 0});return w(e,Mb(a,d,0,c),2)}return e.return(e.l)})}
function Mb(a,b,c,d){var e,f,g,h;return D(function(k){switch(k.h){case 1:return e=c,e>=d?k.return({done:!1,value:new Uint8Array(b,0,d)}):w(k,a.read(new Uint8Array(b,e,d-e)),2);case 2:f=k.l;g=f.done;h=f.value;if(!((e+=h.byteLength)<d)||g){k.g(3);break}return w(k,Mb(a,h.buffer,e,d),4);case 4:return k.return(k.l);case 3:return k.return({done:g,value:new Uint8Array(h.buffer,0,e)})}})}function Nb(a,b){return b&&"byob"===b.mode?new Jb(a):new Y(a)};function Ob(a){this.i=a}Ob.prototype.cancel=function(){var a=this,b;return D(function(c){if(1==c.h)return(b=a.i)&&b.return?w(c,b.return(),2):c.g(2);a.i=null;c.h=0})};function Pb(a){this.i=a}r(Pb,Ob);Pb.prototype.pull=function(a){var b=this,c,d;return D(function(e){if(1==e.h)return(c=b.i)?w(e,c.next(a.desiredSize),3):e.g(2);if(2!=e.h&&(d=e.l,!d.done))return e.return(a.enqueue(d.value));a.close();e.h=0})};
function Qb(a,b){b=void 0===b?{}:b;this.i=a;this.type="bytes";this.autoAllocateChunkSize=b.autoAllocateChunkSize;this.qa=new Pb(a)}r(Qb,Ob);
Qb.prototype.pull=function(a){var b=this,c,d,e,f,g;return D(function(h){switch(h.h){case 1:if(a.byobRequest){h.g(2);break}return w(h,b.qa.pull(a),3);case 3:return h.return(h.l);case 2:if(!b.i){h.g(4);break}c=a.byobRequest;d=c.view;return w(h,b.i.next(d),5);case 5:if(e=h.l,f=e.done,g=e.value,!f){if("number"===typeof g)return h.return(a.byobRequest.respond(g));if(ArrayBuffer.isView(g)){var k=h.return;if(g.buffer===d.buffer)var m=a.byobRequest.respondWithNewView(g);else{m=a.byobRequest;var u=m.respond;
var v=void 0===v?0:v;var p=void 0===p?g.byteLength:p;var E=d.byteLength,A=new Uint8Array(d.buffer,d.byteOffset,E);p=new Uint8Array(g.buffer,g.byteOffset,Math.min(p,E,g.buffer.byteLength-g.byteOffset));A.set(p,v);m=u.call(m,p.byteLength)}return k.call(h,m)}}case 4:a.close(),h.h=0}})};
var Rb=function(){function a(e,f){return e instanceof Qb?new c(e,f):new d(e,f)}function b(e,f){function g(){return ReadableStream.apply(this,arguments)||this}function h(){return ReadableStream.apply(this,arguments)||this}r(h,ReadableStream);h.prototype[Symbol.asyncIterator]=function(){return Nb(this)[Symbol.asyncIterator]()};r(g,ReadableStream);g.prototype[Symbol.asyncIterator]=function(){return Nb(this,{mode:"byob"})[Symbol.asyncIterator]()};c=g;d=h;b=a;return a(e,f)}var c,d;return function(e,f){return b(e,
f)}}();function Sb(a,b){return b&&"type"in b&&"bytes"===b.type?Rb(new Qb(a[Symbol.asyncIterator](),b),b):Rb(new Pb(a[Symbol.asyncIterator]()),b)}W.prototype.tee=function(){return Tb(this).tee()};W.prototype.pipeTo=function(a,b){return Tb(this).pipeTo(a,b)};W.prototype.pipeThrough=function(a,b){return Tb(this).pipeThrough(a,b)};function Tb(a){return a.U||(a.U=a.pipe(Fb(),Sb))}W.prototype.toDOMStream=function(a){return a?Sb(this,a):Sb(this)};function Ub(a,b){return Sb(vb(a),b)}Q.prototype.tee=function(){return Vb(this).tee()};Q.prototype.pipeTo=function(a,b){return Vb(this).pipeTo(a,b)};Q.prototype.pipeThrough=function(a,b){return Vb(this).pipeThrough(a,b)};function Vb(a){return a.U||(a.U=a.pipe(Bb(),Ub))}function Wb(a){return a?Ub(this,a):Ub(this)}Q.prototype.toDOMStream=Wb;function Xb(a,b){this.V=a;this.i=b}r(Xb,Q);Xb.prototype[Symbol.iterator]=function Yb(){var b=this;return C(Yb,function(c){return b.V()?na(c,b.i,1):c.g(0)})};function Zb(a){this.Z=a}r(Zb,Q);Zb.prototype[Symbol.iterator]=function $b(){var b=this,c,d,e,f,g;return C($b,function(h){1==h.h&&(c=b.Z.length,d=b.Z.map(function(k){return k[Symbol.iterator]()}));if(!(0<c))return h.g(0);e=Array(c);for(f=-1;++f<c;){g=d[f].next();if(g.done)return d.forEach(Ra),h.return(void 0);e[f]=g.value}return w(h,e,2)})};var Z={get FromIterable(){return P},get from(){return Na}};Z.CatchIterable=R;Z.ConcatIterable=Ta;Z.IterableX=Q;Z.OfIterable=hb;Z.OnErrorResumeNextIterable=jb;Z.ZipIterable=Zb;Z._initialize=Pa;Z.as=Qa;Z.average=function(a,b){var c=b||{};b=c.selector;b=void 0===b?K:b;c=c.thisArg;var d=0,e=0;a=n(a);for(var f=a.next();!f.done;f=a.next())d+=b.call(c,f.value),e++;if(0===e)throw Error("Empty collection");return d/e};Z.catchAll=function(a){return new R(a)};
Z.catchError=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];return new R(b)};Z.concat=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];return new Ta(b)};Z.count=function(a,b){var c=b||{};b=c.thisArg;c=c.predicate;c=void 0===c?function(){return!0}:c;var d=0;a=n(a);for(var e=a.next();!e.done;e=a.next())c.call(b,e.value,d)&&d++;return d};Z.create=function(a){return new Va(a)};Z.defer=Ya;
Z.elementAt=function(a,b){a=n(a);for(var c=a.next();!c.done;c=a.next()){c=c.value;if(0===b)return c;b--}};Z.empty=ab;Z.every=function(a,b){var c=b.thisArg;b=b.predicate;var d=0;a=n(a);for(var e=a.next();!e.done;e=a.next())if(!b.call(c,e.value,d++))return!1;return!0};Z.find=function(a,b){var c=b.thisArg;b=b.predicate;var d=0;a=n(a);for(var e=a.next();!e.done;e=a.next())if(e=e.value,b.call(c,e,d++))return e};
Z.findIndex=function(a,b){var c=b.thisArg;b=b.predicate;var d=0;a=n(a);for(var e=a.next();!e.done;e=a.next())if(b.call(c,e.value,d++))return d;return-1};Z.first=function(a,b){var c=b||{};b=c.thisArg;c=c.predicate;c=void 0===c?function(){return!0}:c;var d=0;a=n(a);for(var e=a.next();!e.done;e=a.next())if(e=e.value,c.call(b,e,d++))return e};Z.generate=function(a,b,c,d){return new bb(a,b,c,d)};Z.iif=function(a,b,c){c=void 0===c?ab():c;return Ya(function(){return a()?b:c})};
Z.includes=function(a,b,c){c=void 0===c?0:c;var d=0;Math.abs(c)&&(c=0);a=n(a);for(var e=a.next();!e.done;e=a.next())if(e=e.value,d++>c&&db(e,b))return!0;return!1};Z.isEmpty=function(a){for(a=n(a).next();!a.done;)return!1;return!0};Z.last=function(a,b){var c=b||{};b=c.thisArg;c=c.predicate;c=void 0===c?function(){return!0}:c;var d=0,e;a=n(a);for(var f=a.next();!f.done;f=a.next())f=f.value,c.call(b,f,d++)&&(e=f);return e};
Z.max=function(a,b){var c=b||{};b=c.comparer;b=void 0===b?eb:b;c=c.selector;c=void 0===c?K:c;a=a[Symbol.iterator]();var d=a.next();if(d.done)throw Error("Sequence contains no elements");for(var e=c(d.value);!(d=a.next()).done;)d=c(d.value),0<b(d,e)&&(e=d);return e};Z.maxBy=function(a,b){b=b||{};var c=b.comparer;return fb(a,b.selector,void 0===c?eb:c)};
Z.min=function(a,b){var c=b||{};b=c.comparer;b=void 0===b?eb:b;c=c.selector;c=void 0===c?K:c;a=a[Symbol.iterator]();var d=a.next();if(d.done)throw Error("Sequence contains no elements");for(var e=c(d.value);!(d=a.next()).done;)d=c(d.value),0>b(d,e)&&(e=d);return e};Z.minBy=function(a,b){b=b||{};var c=b.comparer,d=void 0===c?eb:c;return fb(a,b.selector,function(e,f){return-d(e,f)})};Z.of=gb;Z.onErrorResumeNext=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];return new jb(b)};
Z.pipe=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];return 0===c.length?a instanceof Q?a:Na(a):function(e){return c.reduce(function(f,g){return g(f)},e)}(a)};Z.range=function(a,b){return new lb(a,b)};
Z.reduce=function(a,b,c){var d="function"===typeof b?2<arguments.length?{callback:b,seed:c}:{callback:b}:b,e=d.seed,f=d.callback;d=d.hasOwnProperty("seed");for(var g=0,h=!1,k=n(a),m=k.next();!m.done;m=k.next())m=m.value,h||(h=d)?e=f(e,m,g++):(e=m,h=!0,g++);if(!d&&!h)throw Error("Sequence contains no elements");return e};
Z.reduceRight=function(a,b,c){var d="function"===typeof b?2<arguments.length?{callback:b,seed:c}:{callback:b}:b,e=d.seed,f=d.callback;d=d.hasOwnProperty("seed");for(var g=nb(a),h=!1,k=g.length-1;0<=k;k--){var m=g[k];h||(h=d)?e=f(e,m,k):(e=m,h=!0)}if(!d&&!h)throw Error("Sequence contains no elements");return e};Z.repeatValue=function(a,b){return new ob(gb(a),void 0===b?-1:b)};
Z.sequenceEqual=function(a,b,c){c=(c||{}).comparer;c=void 0===c?db:c;a=a[Symbol.iterator]();b=b[Symbol.iterator]();for(var d,e;!(d=a.next()).done;)if((e=b.next()).done||!c(d.value,e.value))return!1;return!!b.next().done};Z.single=function(a,b){var c=b||{};b=c.thisArg;c=c.predicate;c=void 0===c?function(){return!0}:c;var d=!1,e=0;a=n(a);for(var f=a.next();!f.done;f=a.next()){f=f.value;if(d&&c.call(b,f,e++))throw Error("More than one element was found");if(c.call(b,f,e++)){var g=f;d=!0}}return g};
Z.some=function(a,b){var c=b.thisArg;b=b.predicate;var d=0;a=n(a);for(var e=a.next();!e.done;e=a.next())if(b.call(c,e.value,d++))return!0;return!1};Z.sum=function(a,b){var c=b||{};b=c.selector;b=void 0===b?K:b;c=c.thisArg;var d=0;a=n(a);for(var e=a.next();!e.done;e=a.next())d+=b.call(c,e.value);return d};Z.throwError=function(a){return new rb(a)};Z.toArray=nb;Z.toDOMStream=Ub;Z.toDOMStreamProto=Wb;
Z.toMap=function(a,b){var c=b||{};b=c.elementSelector;b=void 0===b?K:b;c=c.keySelector;c=void 0===c?K:c;var d=new Map;a=n(a);for(var e=a.next();!e.done;e=a.next()){var f=e.value;e=b(f);f=c(f);d.set(f,e)}return d};Z.toSet=function(a){var b=new Set;a=n(a);for(var c=a.next();!c.done;c=a.next())b.add(c.value);return b};Z.whileDo=function(a,b){return new Xb(b,a)};Z.zip=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];return new Zb(b)};Ea.prototype[Symbol.toStringTag]="__await";Object.defineProperty(Ea,Symbol.hasInstance,{writable:!0,configurable:!0,value:function(a){return!(!a||"__await"!==a[Symbol.toStringTag])}});Object.assign(arguments[0],Z);}.bind(this))));

//# sourceMappingURL=Ix.dom.iterable.es5.min.js.map
