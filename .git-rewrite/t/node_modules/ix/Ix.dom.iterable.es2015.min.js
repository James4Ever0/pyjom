(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
    typeof define === 'function' && define.amd ? define(['IxIterable'], factory) :
    (factory(global.IxIterable = global.IxIterable || {}));
}(this, (function (exports) {/*
 *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
*****************************************************************************/
'use strict';function g(a){return this instanceof g?this:new g(a)};function k(a){return a}async function n(a){return a};function p(a,b){return"undefined"===typeof b?a:function(c,d){return a.call(b,c,d)}};const q=a=>"function"===typeof a,r=a=>null!=a&&Object(a)===a;function u(a){return r(a)&&"number"===typeof a.length}function v(a){return null!=a&&q(a[Symbol.iterator])}function w(a){return r(a)&&!q(a[Symbol.iterator])&&q(a.next)}function x(a){return null!=a&&Object(a)===a&&"function"===typeof a.subscribe}const y=a=>r(a)&&q(a.pipe)&&q(a._read)&&"boolean"===typeof a.readable&&r(a._readableState),z=a=>r(a)&&q(a.end)&&q(a._write)&&"boolean"===typeof a.writable&&r(a._writableState);function A(a){a=Number(a);return isNaN(a)?0:0!==a&&isFinite(a)?(0<a?1:-1)*Math.floor(Math.abs(a)):a};const B=Math.pow(2,53)-1;let C,D;function E(a){C=function(b,c=k,d){c=p(c,d);if(v(b)||u(b))return new D(b,c);if(w(b))return new D({[Symbol.iterator]:()=>b},c);throw new TypeError("Input type not supported");};D=class extends a{constructor(b,c){super();this.g=b;this.m=c}*[Symbol.iterator](){let b=0;if(v(this.g))for(var c of this.g)yield this.m(c,b++);else for(c=Math.min(Math.max(A(this.g.length),0),B);b<c;)yield this.m(this.g[b],b++)}}};class F{forEach(a,b){a=p(a,b);b=0;for(const c of this)a(c,b++)}pipe(...a){let b=-1;const c=a.length;let d=this;for(;++b<c;)d=a[b](G(d));return d}}F.prototype[Symbol.toStringTag]="IterableX";Object.defineProperty(F,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"IterableX"!==a[Symbol.toStringTag])}});E(F);
try{(a=>{if(!a){F.prototype.pipe=function(...c){let d=-1;const e=c.length;let f=this,h;for(;++d<e;)if(h=c[d],"function"===typeof h)f=h(G(f));else if(z(h))return{end:c=!0}=c[d+1]||{},y(f)?f.pipe(h,{end:c}):G(f).V(b(h)).pipe(h,{end:c});return f};var b=(c,d=c.S||{U:!0})=>d}})("object"===typeof window&&"object"===typeof document&&9===document.nodeType)}catch(a){};function G(a){return a instanceof F?a:"string"===typeof a?new D([a],k):v(a)||u(a)?new D(a,k):new D([a],k)};function H(a){"function"===typeof a.return&&a.return()};class I extends F{constructor(a){super();this.g=a}*[Symbol.iterator](){let a=null,b=!1;for(const c of this.g){const d=c[Symbol.iterator]();a=null;for(b=!1;;){let e={};try{const {done:f,value:h}=d.next();if(f){H(d);break}e=h}catch(f){a=f;b=!0;H(d);break}yield e}if(!b)break}if(b)throw a;}};class J extends F{constructor(a){super();this.g=a}*[Symbol.iterator](){for(const a of this.g)yield*a}};class aa extends F{constructor(a){super();this.m=a}[Symbol.iterator](){return this.m()}};class ba extends F{constructor(a){super();this.m=a}*[Symbol.iterator](){for(const a of this.m())yield a}}function K(a){return new ba(a)};class ca extends F{*[Symbol.iterator](){}}function L(){return new ca};class da extends F{constructor(a,b,c,d){super();this.M=a;this.D=b;this.N=c;this.P=d}*[Symbol.iterator](){for(let a=this.M;this.D(a);a=this.N(a))yield this.P(a)}};function ea(a,b){return a===b||"number"===typeof a&&"number"===typeof b&&isNaN(a)&&isNaN(b)}function M(a,b){return a>b?1:a<b?-1:0};function fa(a,b,c){let d=[];a=a[Symbol.iterator]();const {value:e,done:f}=a.next();if(f)throw Error("Sequence contains no elements");let h=b(e);d.push(e);for(var l;!(l=a.next()).done;){l=l.value;const m=b(l),t=c(m,h);0===t?d.push(l):0<t&&(d=[l],h=m)}return d};function ha(...a){return new ia(a)}class ia extends F{constructor(a){super();this.L=a}*[Symbol.iterator](){yield*this.L}};class ja extends F{constructor(a){super();this.g=a}*[Symbol.iterator](){for(const a of this.g){const b=a[Symbol.iterator]();for(;;){let c;try{c=b.next()}catch(d){break}if(c.done)break;yield c.value}}}};class ka extends F{constructor(a,b){super();this.J=a;this.i=b}*[Symbol.iterator](){for(let a=this.J,b=this.J+this.i;a<b;a++)yield a}};function la(a){const b=[];for(const c of a)b.push(c);return b};class ma extends F{constructor(a,b){super();this.g=a;this.i=b}*[Symbol.iterator](){if(-1===this.i)for(;;)for(var a of this.g)yield a;else for(a=0;a<this.i;a++)for(const b of this.g)yield b}};class na extends F{constructor(a){super();this.j=a}*[Symbol.iterator](){throw this.j;}};function oa(a,b){if(a.F)throw Error("AsyncSink already ended");if(0<a.u.length){const {resolve:c,reject:d}=a.u.shift();"error"===b.type?d(b.error):c({done:!1,value:b.value})}else a.G.push(b)}
class pa{constructor(){this.F=!1;this.G=[];this.u=[]}[Symbol.asyncIterator](){return this}write(a){oa(this,{type:"value",value:a})}error(a){oa(this,{type:"error",error:a})}next(){if(0<this.G.length){const {type:a,value:b,error:c}=this.G.shift();return"error"===a?Promise.reject(c):Promise.resolve({done:!1,value:b})}return this.F?Promise.resolve({done:!0}):new Promise((a,b)=>{this.u.push({resolve:a,reject:b})})}end(){for(;0<this.u.length;)this.u.shift().resolve({done:!0});this.F=!0}};class N extends Error{constructor(a="The operation has been aborted"){super(a);Object.setPrototypeOf(this,N.prototype);Error.captureStackTrace(this,this.constructor);this.name="AbortError"}get [Symbol.toStringTag](){return"AbortError"}}function O(a){if(a&&a.aborted)throw new N;}Object.defineProperty(N,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return r(a)&&("AbortError"===a.constructor.name||"AbortError"===a[Symbol.toStringTag])}});let qa,P,Q,R,S;class ra{constructor(){this.A=this.i=0;this.s=new Map}clear(){this.s.clear()}get count(){return this.i}get H(){return this.A}set H(a){this.A=a}done(){this.A--}get(a){if(!this.s.has(a))throw Error("Element no longer available in the buffer.");const b=this.s.get(a),c=b.value;0===--b.count&&this.s.delete(a);return c}push(a){this.s.set(this.i++,{value:a,count:this.A})}};class sa extends F{constructor(a){super();this.o=!1;this.g=a;this.h=new ra}*v(a){try{for(;;){let b=!1,c={};if(a>=this.h.count){if(!this.o)try{const d=this.g.next();if(b=!d.done)c=d.value}catch(d){this.j=d,this.o=!0}if(this.o){if(this.j)throw this.j;break}b&&this.h.push(c)}else b=!0;if(b)yield this.h.get(a);else break;a++}}finally{this.h.done()}}[Symbol.iterator](){this.h.H++;return this.v(this.h.count)[Symbol.iterator]()}}function ta(){return function(a){return new sa(a[Symbol.iterator]())}};function T(a){return a instanceof U?a:"string"===typeof a?new P([a],n):v(a)||r(a)&&q(a[Symbol.asyncIterator])?new Q(a,n):r(a)&&q(a.then)?new R(a,n):x(a)?new S(a,n):u(a)?new P(a,n):new P([a],n)};class va{constructor(a,b){this.g=a;this.R=b}[Symbol.asyncIterator](){return this.g[Symbol.asyncIterator](this.R)}}class U{async forEach(a,b,c){const d=c?new va(this,c):this;let e=0;for await(const f of d)await a.call(b,f,e++,c)}pipe(...a){let b=-1;const c=a.length;let d=this;for(;++b<c;)d=a[b](T(d));return d}}U.prototype[Symbol.toStringTag]="AsyncIterableX";Object.defineProperty(U,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"AsyncIterableX"!==a[Symbol.toStringTag])}});
(function(a){qa=function(b){const c=p(n,void 0);if(v(b)||r(b)&&q(b[Symbol.asyncIterator]))return new Q(b,c);if(r(b)&&q(b.then))return new R(b,c);if(x(b))return new S(b,c);if(u(b))return new P(b,c);if(w(b))return new Q({[Symbol.asyncIterator]:()=>b},c);throw new TypeError("Input type not supported");};P=class extends a{constructor(b,c){super();this.g=b;this.l=c}async*[Symbol.asyncIterator](){let b=0;const c=Math.min(Math.max(A(this.g.length),0),B);for(;b<c;)yield await this.l(this.g[b],b++)}};Q=class extends a{constructor(b,
c){super();this.g=b;this.l=c}async*[Symbol.asyncIterator](){let b=0;for await(const c of this.g)yield await this.l(c,b++)}};R=class extends a{constructor(b,c){super();this.g=b;this.l=c}async*[Symbol.asyncIterator](){const b=await this.g;yield await this.l(b,0)}};S=class extends a{constructor(b,c){super();this.O=b;this.l=c}async*[Symbol.asyncIterator](b){function c(){d.error(new N)}O(b);const d=new pa,e=this.O.subscribe({next(h){d.write(h)},error(h){d.error(h)},complete(){d.end()}});b&&b.addEventListener("abort",
c);let f=0;try{for(let h;!(h=await d.next()).done;)O(b),yield await this.l(h.value,f++)}finally{b&&b.removeEventListener("abort",c),e.unsubscribe()}}}})(U);try{(a=>{if(!a){U.prototype.pipe=function(...c){let d=-1;const e=c.length;let f=this,h;for(;++d<e;)if(h=c[d],"function"===typeof h)f=h(T(f));else if(z(h))return{end:c=!0}=c[d+1]||{},y(f)?f.pipe(h,{end:c}):T(f).V(b(h)).pipe(h,{end:c});return f};var b=(c,d=c.S||{U:!0})=>d}})("object"===typeof window&&"object"===typeof document&&9===document.nodeType)}catch(a){};class wa extends U{constructor(a){var b=new ra;super();this.B=this.j=null;this.o=!1;this.g=a;this.h=b}[Symbol.asyncIterator](a){O(a);return this.v(0)}async *v(a=0){--a;let b=!1;const c=this.h;try{do if(++a<c.count)yield c.get(a);else{if(this.o)throw this.j;null===this.B&&(this.B=this.g.next().then(d=>{this.B=null;d.done||c.push(d.value);return d}));({done:b}=await this.B.catch(d=>{this.j=d;this.o=!0;throw d;}));b||(yield c.get(a))}while(!b)}finally{c.done()}}};class xa extends wa{[Symbol.asyncIterator](a){O(a);this.h.H++;return this.v(this.h.count)[Symbol.asyncIterator]()}}function ya(){return function(a){return new xa(a[Symbol.asyncIterator]())}};const za="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;class Aa extends U{constructor(a){super();this.K=a}[Symbol.asyncIterator](){const a=this.K,b=a.getReader();return Ba(a,b,Ca(b))}}class Da extends Aa{[Symbol.asyncIterator](){var a=this.K;let b;try{b=a.getReader({mode:"byob"})}catch(c){return super[Symbol.asyncIterator]()}a=Ba(a,b,Ea(b));a.next();return a}}
async function*Ba(a,b,c){let d=!1;try{yield*c}catch(e){(d=!0,b)&&await b.cancel(e)}finally{if(b&&(d||await b.cancel(),a.locked))try{b.closed.catch(()=>{}),b.releaseLock()}catch(e){}}}async function*Ca(a){let b;for(;!(b=await a.read()).done;)yield b.value}async function*Ea(a){var b;for(b=yield null;!(b=await Fa(a,b)).done;)b=yield b.value}
async function Fa(a,b){let c;if("number"===typeof b)c=new ArrayBuffer(b);else if(b instanceof ArrayBuffer)b=(c=b).byteLength;else if(b instanceof za)b=(c=b).byteLength;else return{done:!0,value:void 0};return await Ga(a,c,0,b)}async function Ga(a,b,c,d){if(c>=d)return{done:!1,value:new Uint8Array(b,0,d)};const {done:e,value:f}=await a.read(new Uint8Array(b,c,d-c));return(c+=f.byteLength)<d&&!e?await Ga(a,f.buffer,c,d):{done:e,value:new Uint8Array(f.buffer,0,c)}}
function Ha(a,b){return b&&"byob"===b.mode?new Da(a):new Aa(a)};function Ia(a,b,c=0,d=b.byteLength){const e=a.byteLength;a=new Uint8Array(a.buffer,a.byteOffset,e);b=new Uint8Array(b.buffer,b.byteOffset,Math.min(d,e,b.buffer.byteLength-b.byteOffset));a.set(b,c);return b.byteLength}class Ja{constructor(a){this.g=a}async cancel(){const a=this.g;a&&a.return&&await a.return();this.g=null}}class Ka extends Ja{async pull(a){var b=this.g;if(b&&(b=await b.next(a.desiredSize),!b.done))return a.enqueue(b.value);a.close()}}
class La extends Ja{constructor(a,b={}){super(a);this.type="bytes";this.autoAllocateChunkSize=b.autoAllocateChunkSize;this.T=new Ka(a)}async pull(a){if(!a.byobRequest)return await this.T.pull(a);if(this.g){const b=a.byobRequest.view,{done:c,value:d}=await this.g.next(b);if(!c){if("number"===typeof d)return a.byobRequest.respond(d);if(ArrayBuffer.isView(d))return d.buffer===b.buffer?a.byobRequest.respondWithNewView(d):a.byobRequest.respond(Ia(b,d))}}a.close()}}
const Ma=(()=>{let a,b,c=(e,f)=>{class h extends ReadableStream{[Symbol.asyncIterator](){return Ha(this)[Symbol.asyncIterator]()}}class l extends ReadableStream{[Symbol.asyncIterator](){return Ha(this,{mode:"byob"})[Symbol.asyncIterator]()}}a=l;b=h;c=d;return d(e,f)};const d=(e,f)=>e instanceof La?new a(e,f):new b(e,f);return(e,f)=>c(e,f)})();function V(a,b){return b&&"type"in b&&"bytes"===b.type?Ma(new La(a[Symbol.asyncIterator](),b),b):Ma(new Ka(a[Symbol.asyncIterator]()),b)}U.prototype.tee=function(){return W(this).tee()};
U.prototype.pipeTo=function(a,b){return W(this).pipeTo(a,b)};U.prototype.pipeThrough=function(a,b){return W(this).pipeThrough(a,b)};function W(a){return a.C||(a.C=a.pipe(ya(),V))}U.prototype.toDOMStream=function(a){return a?V(this,a):V(this)};function X(a,b){return V(qa(a),b)}F.prototype.tee=function(){return Y(this).tee()};F.prototype.pipeTo=function(a,b){return Y(this).pipeTo(a,b)};F.prototype.pipeThrough=function(a,b){return Y(this).pipeThrough(a,b)};function Y(a){return a.C||(a.C=a.pipe(ta(),X))}function Na(a){return a?X(this,a):X(this)}F.prototype.toDOMStream=Na;class Oa extends F{constructor(a,b){super();this.D=a;this.g=b}*[Symbol.iterator](){for(;this.D();)yield*this.g}};class Pa extends F{constructor(a){super();this.I=a}*[Symbol.iterator](){const a=this.I.length,b=this.I.map(c=>c[Symbol.iterator]());for(;0<a;){const c=Array(a);for(let d=-1;++d<a;){const e=b[d].next();if(e.done){b.forEach(H);return}c[d]=e.value}yield c}}};var Z={get FromIterable(){return D},get from(){return C}};Z.CatchIterable=I;Z.ConcatIterable=J;Z.IterableX=F;Z.OfIterable=ia;Z.OnErrorResumeNextIterable=ja;Z.ZipIterable=Pa;Z._initialize=E;Z.as=G;Z.average=function(a,b){const {["selector"]:c=k,["thisArg"]:d}=b||{};let e=b=0;for(const f of a)b+=c.call(d,f),e++;if(0===e)throw Error("Empty collection");return b/e};Z.catchAll=function(a){return new I(a)};Z.catchError=function(...a){return new I(a)};Z.concat=function(...a){return new J(a)};
Z.count=function(a,b){const {["thisArg"]:c,["predicate"]:d=()=>!0}=b||{};b=0;for(const e of a)d.call(c,e,b)&&b++;return b};Z.create=function(a){return new aa(a)};Z.defer=K;Z.elementAt=function(a,b){for(const c of a){if(0===b)return c;b--}};Z.empty=L;Z.every=function(a,b){const {["thisArg"]:c,["predicate"]:d}=b;b=0;for(const e of a)if(!d.call(c,e,b++))return!1;return!0};Z.find=function(a,b){const {["thisArg"]:c,["predicate"]:d}=b;b=0;for(const e of a)if(d.call(c,e,b++))return e};
Z.findIndex=function(a,b){const {["thisArg"]:c,["predicate"]:d}=b;b=0;for(const e of a)if(d.call(c,e,b++))return b;return-1};Z.first=function(a,b){const {["thisArg"]:c,["predicate"]:d=()=>!0}=b||{};b=0;for(const e of a)if(d.call(c,e,b++))return e};Z.generate=function(a,b,c,d){return new da(a,b,c,d)};Z.iif=function(a,b,c=L()){return K(()=>a()?b:c)};Z.includes=function(a,b,c=0){let d=0;Math.abs(c)&&(c=0);for(const e of a)if(d++>c&&ea(e,b))return!0;return!1};
Z.isEmpty=function(a){for(const b of a)return!1;return!0};Z.last=function(a,b){const {["thisArg"]:c,["predicate"]:d=()=>!0}=b||{};b=0;let e;for(const f of a)d.call(c,f,b++)&&(e=f);return e};Z.max=function(a,b){const {["comparer"]:c=M,["selector"]:d=k}=b||{};a=a[Symbol.iterator]();var e=a.next();if(e.done)throw Error("Sequence contains no elements");for(b=d(e.value);!(e=a.next()).done;)e=d(e.value),0<c(e,b)&&(b=e);return b};
Z.maxBy=function(a,b){const {["comparer"]:c=M,["selector"]:d}=b||{};return fa(a,d,c)};Z.min=function(a,b){const {["comparer"]:c=M,["selector"]:d=k}=b||{};a=a[Symbol.iterator]();var e=a.next();if(e.done)throw Error("Sequence contains no elements");for(b=d(e.value);!(e=a.next()).done;)e=d(e.value),0>c(e,b)&&(b=e);return b};Z.minBy=function(a,b){const {["comparer"]:c=M,["selector"]:d}=b||{};return fa(a,d,(e,f)=>-c(e,f))};Z.of=ha;Z.onErrorResumeNext=function(...a){return new ja(a)};
Z.pipe=function(a,...b){return 0===b.length?a instanceof F?a:C(a):(c=>b.reduce((d,e)=>e(d),c))(a)};Z.range=function(a,b){return new ka(a,b)};Z.reduce=function(a,b,c){var d="function"===typeof b?2<arguments.length?{callback:b,seed:c}:{callback:b}:b;const {["seed"]:e,["callback"]:f}=d;d=d.hasOwnProperty("seed");let h=0,l=!1,m=e;for(const t of a)l||(l=d)?m=f(m,t,h++):(m=t,l=!0,h++);if(!d&&!l)throw Error("Sequence contains no elements");return m};
Z.reduceRight=function(a,b,c){var d="function"===typeof b?2<arguments.length?{callback:b,seed:c}:{callback:b}:b;const {["seed"]:e,["callback"]:f}=d;d=d.hasOwnProperty("seed");const h=la(a);let l=!1,m=e;for(let t=h.length-1;0<=t;t--){const ua=h[t];l||(l=d)?m=f(m,ua,t):(m=ua,l=!0)}if(!d&&!l)throw Error("Sequence contains no elements");return m};Z.repeatValue=function(a,b=-1){return new ma(ha(a),b)};
Z.sequenceEqual=function(a,b,c){({["comparer"]:c=ea}=c||{});a=a[Symbol.iterator]();b=b[Symbol.iterator]();let d,e;for(;!(d=a.next()).done;)if((e=b.next()).done||!c(d.value,e.value))return!1;return!!b.next().done};Z.single=function(a,b){const {["thisArg"]:c,["predicate"]:d=()=>!0}=b||{};let e;b=!1;let f=0;for(const h of a){if(b&&d.call(c,h,f++))throw Error("More than one element was found");d.call(c,h,f++)&&(e=h,b=!0)}return e};
Z.some=function(a,b){const {["thisArg"]:c,["predicate"]:d}=b;b=0;for(const e of a)if(d.call(c,e,b++))return!0;return!1};Z.sum=function(a,b){const {["selector"]:c=k,["thisArg"]:d}=b||{};b=0;for(const e of a)b+=c.call(d,e);return b};Z.throwError=function(a){return new na(a)};Z.toArray=la;Z.toDOMStream=X;Z.toDOMStreamProto=Na;Z.toMap=function(a,b){const {["elementSelector"]:c=k,["keySelector"]:d=k}=b||{};b=new Map;for(const e of a){a=c(e);const f=d(e);b.set(f,a)}return b};
Z.toSet=function(a){const b=new Set;for(const c of a)b.add(c);return b};Z.whileDo=function(a,b){return new Oa(b,a)};Z.zip=function(...a){return new Pa(a)};g.prototype[Symbol.toStringTag]="__await";Object.defineProperty(g,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"__await"!==a[Symbol.toStringTag])}});Object.assign(arguments[0],Z);}.bind(this))));

//# sourceMappingURL=Ix.dom.iterable.esnext.min.js.map
