#!/usr/bin/env -S node --no-warnings --loader ts-node/esm
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tstest_1 = require("tstest");
const payload_store_js_1 = require("./payload-store.js");
(0, tstest_1.test)('PayloadStore perfect restart', async (t) => {
    const token = Math.random().toString(36);
    const store = new payload_store_js_1.PayloadStore({ token });
    for (let i = 0; i < 3; i++) {
        const accountId = Math.random().toString(36);
        await store.start(accountId);
        await store.stop();
        t.pass('start/stop-ed at #' + i);
    }
    await store.destroy();
});
//# sourceMappingURL=payload-store.spec.js.map