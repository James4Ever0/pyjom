(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
    typeof define === 'function' && define.amd ? define(['IxAsynciterableOperators'], factory) :
    (factory(global.IxAsynciterableOperators = global.IxAsynciterableOperators || {}));
}(this, (function (exports) {/*
 *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
*****************************************************************************/
'use strict';function e(a){return this instanceof e?this:new e(a)};const k=a=>"function"===typeof a,l=a=>null!=a&&Object(a)===a;function m(a){return l(a)&&"number"===typeof a.length}function r(a){return null!=a&&k(a[Symbol.iterator])}function aa(a){return null!=a&&Object(a)===a&&"function"===typeof a.subscribe}const ba=a=>l(a)&&k(a.pipe)&&k(a._read)&&"boolean"===typeof a.readable&&l(a._readableState),ca=a=>l(a)&&k(a.end)&&k(a._write)&&"boolean"===typeof a.writable&&l(a._writableState);function t(a){return a}async function u(a){return a};function da(a,b){return"undefined"===typeof b?a:function(c,d){return a.call(b,c,d)}};function ea(a){a=Number(a);return isNaN(a)?0:0!==a&&isFinite(a)?(0<a?1:-1)*Math.floor(Math.abs(a)):a};const fa=Math.pow(2,53)-1;function ha(a,b){if(a.L)throw Error("AsyncSink already ended");if(0<a.F.length){const {resolve:c,reject:d}=a.F.shift();"error"===b.type?d(b.error):c({done:!1,value:b.value})}else a.Y.push(b)}
class ia{constructor(){this.L=!1;this.Y=[];this.F=[]}[Symbol.asyncIterator](){return this}write(a){ha(this,{type:"value",value:a})}error(a){ha(this,{type:"error",error:a})}next(){if(0<this.Y.length){const {type:a,value:b,error:c}=this.Y.shift();return"error"===a?Promise.reject(c):Promise.resolve({done:!1,value:b})}return this.L?Promise.resolve({done:!0}):new Promise((a,b)=>{this.F.push({resolve:a,reject:b})})}end(){for(;0<this.F.length;)this.F.shift().resolve({done:!0});this.L=!0}};class v extends Error{constructor(a="The operation has been aborted"){super(a);Object.setPrototypeOf(this,v.prototype);Error.captureStackTrace(this,this.constructor);this.name="AbortError"}get [Symbol.toStringTag](){return"AbortError"}}function w(a){if(a&&a.aborted)throw new v;}Object.defineProperty(v,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return l(a)&&("AbortError"===a.constructor.name||"AbortError"===a[Symbol.toStringTag])}});let ja,x,y,A,B;function C(a){return a instanceof D?a:"string"===typeof a?new x([a],u):r(a)||l(a)&&k(a[Symbol.asyncIterator])?new y(a,u):l(a)&&k(a.then)?new A(a,u):aa(a)?new B(a,u):m(a)?new x(a,u):new x([a],u)};class ka{constructor(a,b){this.g=a;this.W=b}[Symbol.asyncIterator](){return this.g[Symbol.asyncIterator](this.W)}}class D{async forEach(a,b,c){const d=c?new ka(this,c):this;let f=0;for await(const g of d)await a.call(b,g,f++,c)}A(...a){let b=-1;const c=a.length;let d=this;for(;++b<c;)d=a[b](C(d));return d}}D.prototype[Symbol.toStringTag]="AsyncIterableX";Object.defineProperty(D,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"AsyncIterableX"!==a[Symbol.toStringTag])}});
(function(a){ja=function(b){const c=da(u,void 0);if(r(b)||l(b)&&k(b[Symbol.asyncIterator]))return new y(b,c);if(l(b)&&k(b.then))return new A(b,c);if(aa(b))return new B(b,c);if(m(b))return new x(b,c);if(l(b)&&!k(b[Symbol.iterator])&&k(b.next))return new y({[Symbol.asyncIterator]:()=>b},c);throw new TypeError("Input type not supported");};x=class extends a{constructor(b,c){super();this.g=b;this.i=c}async*[Symbol.asyncIterator](){let b=0;const c=Math.min(Math.max(ea(this.g.length),0),fa);for(;b<c;)yield await this.i(this.g[b],
b++)}};y=class extends a{constructor(b,c){super();this.g=b;this.i=c}async*[Symbol.asyncIterator](){let b=0;for await(const c of this.g)yield await this.i(c,b++)}};A=class extends a{constructor(b,c){super();this.g=b;this.i=c}async*[Symbol.asyncIterator](){const b=await this.g;yield await this.i(b,0)}};B=class extends a{constructor(b,c){super();this.ra=b;this.i=c}async*[Symbol.asyncIterator](b){function c(){d.error(new v)}w(b);const d=new ia,f=this.ra.subscribe({next(h){d.write(h)},error(h){d.error(h)},
complete(){d.end()}});b&&b.addEventListener("abort",c);let g=0;try{for(let h;!(h=await d.next()).done;)w(b),yield await this.i(h.value,g++)}finally{b&&b.removeEventListener("abort",c),f.unsubscribe()}}}})(D);
try{(a=>{if(!a){D.prototype.pipe=function(...c){let d=-1;const f=c.length;let g=this,h;for(;++d<f;)if(h=c[d],"function"===typeof h)g=h(C(g));else if(ca(h))return{end:c=!0}=c[d+1]||{},ba(g)?g.A(h,{end:c}):C(g).za(b(h)).A(h,{end:c});return g};var b=(c,d=c.va||{ya:!0})=>d}})("object"===typeof window&&"object"===typeof document&&9===document.nodeType)}catch(a){};class E extends D{constructor(a,b){super();this.g=a;this.W=b}withAbort(a){return new E(this.g,a)}[Symbol.asyncIterator](){return this.g[Symbol.asyncIterator](this.W)}}function F(a,b){return b?new E(a,b):a};class la extends D{constructor(a){super();this.g=a}[Symbol.asyncIterator](a){function b(){c.next().then(h=>{if(h.done)f=Promise.resolve({done:!0}),"waiting"===d.type&&d.Z.resolve(f);else{if("waiting"===d.type){const n=d.Z.resolve;d={type:"batching",values:[]};n({done:h.done,value:[h.value]})}else if("batching"===d.type)d.values.push(h.value);else throw Error(`Unhandled discriminated union member ${d}`);b()}},h=>{g=h;"waiting"===d.type&&d.Z.reject(h)})}w(a);const c=F(this.g,a)[Symbol.asyncIterator]();
let d={type:"batching",values:[]},f=null,g=null;b();return{next(){if(g)return Promise.reject(g);if("batching"===d.type&&0<d.values.length){const h=d.values;d.values=[];return Promise.resolve({done:!1,value:h})}if(f)return f;if("waiting"===d.type)throw Error("Previous `next()` is still in progress");return new Promise((h,n)=>{d={type:"waiting",Z:{resolve:h,reject:n}}})},return(h){return c.return?c.return(h).then(()=>({done:!0})):Promise.resolve({done:!0})}}}};class ma extends D{constructor(a,b,c){super();this.g=a;this.h=b;this.ua=c}async*[Symbol.asyncIterator](a){w(a);const b=[];let c=0;for await(const d of F(this.g,a)){0===c%this.ua&&b.push([]);for(const f of b)f.push(d);0<b.length&&b[0].length===this.h&&(yield b.shift());c++}for(;0<b.length;)yield b.shift()}};class na{constructor(){this.l=[]}clear(){this.l=[]}get count(){return this.l.length}get(a){return this.l[a]}push(a){this.l.push(a)}done(){}}
class oa{constructor(a){this.h=0;this.I=a;this.l=new Map}clear(){this.l.clear()}get count(){return this.h}get ea(){return this.I}set ea(a){this.I=a}done(){this.I--}get(a){if(!this.l.has(a))throw Error("Element no longer available in the buffer.");const b=this.l.get(a),c=b.value;0===--b.count&&this.l.delete(a);return c}push(a){this.l.set(this.h++,{value:a,count:this.I})}};class G extends D{constructor(a){super();this.m=a}async*[Symbol.asyncIterator](a){w(a);a=await this.m(a);let b;for(;!(b=await a.next()).done;)yield b.value}};class H extends D{constructor(a,b){super();this.J=this.aa=null;this.ca=!1;this.g=a;this.K=b}[Symbol.asyncIterator](a){w(a);return this._getIterable(0)}async *_getIterable(a=0){--a;let b=!1;const c=this.K;try{do if(++a<c.count)yield c.get(a);else{if(this.ca)throw this.aa;null===this.J&&(this.J=this.g.next().then(d=>{this.J=null;d.done||c.push(d.value);return d}));({done:b}=await this.J.catch(d=>{this.aa=d;this.ca=!0;throw d;}));b||(yield c.get(a))}while(!b)}finally{c.done()}}}
function pa(a=-1,b){return function(c){return b?new G(()=>b(pa(a)(c))[Symbol.asyncIterator]()):-1===a?new H(c[Symbol.asyncIterator](),new na):new H(c[Symbol.asyncIterator](),new oa(a))}};async function I(a){"function"===typeof a.return&&await a.return()};class qa extends D{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){w(a);let b=null,c=!1;for(const d of this.g){const f=F(d,a)[Symbol.asyncIterator]();b=null;for(c=!1;;){let g={};try{const {done:h,value:n}=await f.next();if(h){await I(f);break}g=n}catch(h){b=h;c=!0;await I(f);break}yield g}if(!c)break}if(c)throw b;}};function ra(a){return null===a||"object"!==typeof a&&"function"!==typeof a}const J=new WeakMap;
function K(a){let b;return(new Promise((c,d)=>{b={resolve:c,reject:d};for(const f of a){if(ra(f)){Promise.resolve(f).then(c,d);continue}let g=J.get(f);void 0===g?(g={C:new Set([b]),$:!1},J.set(f,g),Promise.resolve(f).then(h=>{for(const {resolve:n}of g.C)n(h);g.C.clear();g.$=!0},h=>{for(const {reject:n}of g.C)n(h);g.C.clear();g.$=!0})):g.$?Promise.resolve(f).then(c,d):g.C.add(b)}})).finally(()=>{for(const c of a)ra(c)||J.get(c).C.delete(b)})};const sa=new Promise(()=>{});function ta(a,b){return a.then(c=>({value:c,index:b}))}
class ua extends D{constructor(a){super();this.v=a}async*[Symbol.asyncIterator](a){w(a);const b=this.v.length,c=Array(b),d=Array(b);let f=!1;const g=Array(b),h=Array(b);let n=b;h.fill(!1);for(let p=0;p<b;p++){const q=F(this.v[p],a)[Symbol.asyncIterator]();c[p]=q;d[p]=ta(q.next(),p)}for(;0<n;){a=K(d);const {value:{value:p,done:q},index:z}=await a;if(q)d[z]=sa,n--;else if(g[z]=p,h[z]=!0,d[z]=ta(c[z].next(),z),f||(f=h.every(t)))yield g}}};class L extends D{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){w(a);for(const b of this.g)for await(const c of F(b,a))yield c}};class va extends D{async*[Symbol.asyncIterator](a){w(a)}};new Promise(()=>{});const wa="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;class xa extends D{constructor(a){super();this.da=a}[Symbol.asyncIterator](){const a=this.da,b=a.getReader();return ya(a,b,za(b))}}class Aa extends xa{[Symbol.asyncIterator](){var a=this.da;let b;try{b=a.getReader({mode:"byob"})}catch(c){return super[Symbol.asyncIterator]()}a=ya(a,b,Ba(b));a.next();return a}}
async function*ya(a,b,c){let d=!1;try{yield*c}catch(f){(d=!0,b)&&await b.cancel(f)}finally{if(b&&(d||await b.cancel(),a.locked))try{b.closed.catch(()=>{}),b.releaseLock()}catch(f){}}}async function*za(a){let b;for(;!(b=await a.read()).done;)yield b.value}async function*Ba(a){var b;for(b=yield null;!(b=await Ca(a,b)).done;)b=yield b.value}
async function Ca(a,b){let c;if("number"===typeof b)c=new ArrayBuffer(b);else if(b instanceof ArrayBuffer)b=(c=b).byteLength;else if(b instanceof wa)b=(c=b).byteLength;else return{done:!0,value:void 0};return await Da(a,c,0,b)}async function Da(a,b,c,d){if(c>=d)return{done:!1,value:new Uint8Array(b,0,d)};const {done:f,value:g}=await a.read(new Uint8Array(b,c,d-c));return(c+=g.byteLength)<d&&!f?await Da(a,g.buffer,c,d):{done:f,value:new Uint8Array(g.buffer,0,c)}}
function Ea(a,b){return b&&"byob"===b.mode?new Aa(a):new xa(a)};function M(a,b){return new Promise((c,d)=>{function f(){clearTimeout(g);d(new v)}b&&b.aborted&&d(new v);const g=setTimeout(()=>{if(b&&(b.removeEventListener("abort",f),b.aborted)){f();return}c()},a);b&&b.addEventListener("abort",f,{once:!0})})};async function N(a,b){return a===b||"number"===typeof a&&"number"===typeof b&&isNaN(a)&&isNaN(b)};class Fa extends D{constructor(a){super();this.s=a}async*[Symbol.asyncIterator](a){w(a);let b=0;for(;;)await M(this.s,a),yield b++}};const Ga=new Promise(()=>{});function Ha(a,b){return a.then(c=>({value:c,index:b}))}class Ia extends D{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){w(a);const b=this.g.length,c=Array(b),d=Array(b);let f=b;for(let g=0;g<b;g++){const h=F(this.g[g],a)[Symbol.asyncIterator]();c[g]=h;d[g]=Ha(h.next(),g)}for(;0<f;){a=K(d);const {value:{done:g,value:h},index:n}=await a;g?(d[n]=Ga,f--):(d[n]=Ha(c[n].next(),n),yield h)}}}function Ja(a,...b){return new Ia([a,...b])};class Ka extends D{constructor(){var a=[La];super();this.o=a}async*[Symbol.asyncIterator](a){w(a);for(const b of this.o)yield b}};function Ma(a,b){return a.then(c=>({value:c,index:b}))}class Na extends D{constructor(a){super();this.v=a}async*[Symbol.asyncIterator](a){w(a);var b=this.v,c=b.length;const d=Array(c);var f=Array(c);for(let n=0;n<c;n++){const p=F(b[n],a)[Symbol.asyncIterator]();d[n]=p;f[n]=Ma(p.next(),n)}a=K(f);const {value:g,index:h}=await a;g.done||(yield g.value);a=d[h];for(b=0;b<c;b++)b!==h&&(f=d[b],f.return&&f.return());for(;!(c=await a.next()).done;)yield c.value}};async function Oa(a,b){w(b);const c=[];for await(const d of F(a,b))c.push(d);return c};class Pa extends H{constructor(a){super(a,new oa(0))}[Symbol.asyncIterator](a){w(a);this.K.ea++;return this._getIterable(this.K.count)[Symbol.asyncIterator]()}}function O(a){return function(b){return a?new G(async()=>a(O()(b))[Symbol.asyncIterator]()):new Pa(b[Symbol.asyncIterator]())}};function Qa(a,b,c=0,d=b.byteLength){const f=a.byteLength;a=new Uint8Array(a.buffer,a.byteOffset,f);b=new Uint8Array(b.buffer,b.byteOffset,Math.min(d,f,b.buffer.byteLength-b.byteOffset));a.set(b,c);return b.byteLength}class Ra{constructor(a){this.g=a}async cancel(){const a=this.g;a&&a.return&&await a.return();this.g=null}}class Sa extends Ra{async pull(a){var b=this.g;if(b&&(b=await b.next(a.desiredSize),!b.done))return a.enqueue(b.value);a.close()}}
class Ta extends Ra{constructor(a,b={}){super(a);this.type="bytes";this.autoAllocateChunkSize=b.autoAllocateChunkSize;this.wa=new Sa(a)}async pull(a){if(!a.byobRequest)return await this.wa.pull(a);if(this.g){const b=a.byobRequest.view,{done:c,value:d}=await this.g.next(b);if(!c){if("number"===typeof d)return a.byobRequest.respond(d);if(ArrayBuffer.isView(d))return d.buffer===b.buffer?a.byobRequest.respondWithNewView(d):a.byobRequest.respond(Qa(b,d))}}a.close()}}
const Ua=(()=>{let a,b,c=(f,g)=>{class h extends ReadableStream{[Symbol.asyncIterator](){return Ea(this)[Symbol.asyncIterator]()}}class n extends ReadableStream{[Symbol.asyncIterator](){return Ea(this,{mode:"byob"})[Symbol.asyncIterator]()}}a=n;b=h;c=d;return d(f,g)};const d=(f,g)=>f instanceof Ta?new a(f,g):new b(f,g);return(f,g)=>c(f,g)})();function P(a,b){return b&&"type"in b&&"bytes"===b.type?Ua(new Ta(a[Symbol.asyncIterator](),b),b):Ua(new Sa(a[Symbol.asyncIterator]()),b)}D.prototype.tee=function(){return Q(this).tee()};
D.prototype.pipeTo=function(a,b){return Q(this).pipeTo(a,b)};D.prototype.pipeThrough=function(a,b){return Q(this).pipeThrough(a,b)};function Q(a){return a.fa||(a.fa=a.A(O(),P))}D.prototype.toDOMStream=function(a){return a?P(this,a):P(this)};const R=()=>{};function Va(a,b,c){return a&&"object"===typeof a?{next:k(a.next)?d=>a.next(d):R,error:k(a.error)?d=>a.error(d):R,complete:k(a.complete)?()=>a.complete():R}:{next:k(a)?a:R,error:k(b)?b:R,complete:k(c)?c:R}};class Wa extends D{constructor(a,b){super();this.ia=a;this.g=b}async*[Symbol.asyncIterator](a){for(w(a);await this.ia(a);)for await(const b of F(this.g,a))yield b}};class Xa extends D{constructor(a){super();this.v=a}async*[Symbol.asyncIterator](a){w(a);const b=this.v.length,c=this.v.map(d=>F(d,a)[Symbol.asyncIterator]());for(;0<b;){const d=Array(b);for(let f=-1;++f<b;){const {value:g,done:h}=await c[f].next();if(h){await Promise.all(c.map(I));return}d[f]=g}yield d}}};class Ya extends D{constructor(a,b,c){super();this.g=a;this.i=b;this.G=c}async*[Symbol.asyncIterator](a){w(a);let b=0;for await(const c of F(this.g,a))yield await this.i.call(this.G,c,b++,a)}}function Za(a,b){return function(c){return new Ya(c,a,b)}};const $a={},La={};class ab extends D{constructor(a,b,c){super();this.source=a;this.bufferSize=b;this.xa=c}async*[Symbol.asyncIterator](a){const b=[];var c=(new Fa(this.xa)).A(Za(()=>$a));c=Ja(new L([this.source,new Ka]),c);for await(const d of F(c,a)){if(d===La)break;d!==$a&&b.push(d);if(b.length>=this.bufferSize||b.length&&d===$a)yield b.slice(),b.length=0}b.length&&(yield b)}};class bb extends D{constructor(a,b){super();this.g=a;this.oa=b}async*[Symbol.asyncIterator](a){w(a);let b,c=!1;const d=F(this.g,a)[Symbol.asyncIterator]();for(;;){let f={};try{if(f=await d.next(),f.done){await I(d);break}}catch(g){b=await this.oa(g,a);c=!0;await I(d);break}yield f.value}if(c)for await(const f of F(b,a))yield f}};class cb extends D{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){w(a);for await(const b of F(this.g,a))for await(const c of F(b,a))yield c}};class db extends D{constructor(a,b){super();this.g=a;this.X=b}async*[Symbol.asyncIterator](a){w(a);let b=!1,c=()=>{},d=()=>{},f=new Promise((g,h)=>{d=g;c=h});for((async()=>{let g=null;const h=n=>{g=null;d(n);f=new Promise((p,q)=>{d=p;c=q})};a&&a.addEventListener("abort",()=>{b=!0;g&&clearTimeout(g);g=null;c(new v)},{once:!0});try{let n;const p=this.g[Symbol.asyncIterator](a);for(;!b&&!(n=await p.next()).done&&!b;)g&&clearTimeout(g),g=setTimeout(h,this.X,n.value)}catch(n){c(n)}b=!0})();!b;)yield await f}}
;class eb extends D{constructor(a,b){super();this.g=a;this.ja=b}async*[Symbol.asyncIterator](a){w(a);let b=1;for await(const c of F(this.g,a))b=2,yield c;1===b&&(yield this.ja)}};class fb extends D{constructor(a,b){super();this.g=a;this.s=b}async*[Symbol.asyncIterator](a){w(a);for await(const b of F(this.g,a))await M(this.s,a),yield b}};class gb extends D{constructor(a,b){super();this.g=a;this.s=b}async*[Symbol.asyncIterator](a){w(a);await M(this.s,a);for await(const b of F(this.g,a))yield b}};async function S(a,b,c){for(let d=0,f=a.length;d<f;d++)if(await c(b,a[d]))return d;return-1};class hb extends D{constructor(a,b,c){super();this.g=a;this.u=b;this.j=c}async*[Symbol.asyncIterator](a){w(a);const b=[];for await(const c of F(this.g,a)){const d=await this.u(c,a);-1===await S(b,d,this.j)&&(b.push(d),yield c)}}};class ib extends D{constructor(a,b,c){super();this.g=a;this.u=b;this.j=c}async*[Symbol.asyncIterator](a){w(a);let b,c=!1;for await(const d of F(this.g,a)){const f=await this.u(d,a);let g=!1;c&&(g=await this.j(b,f));c&&g||(c=!0,b=f,yield d)}}};class jb extends D{constructor(a,b){super();this.g=a;this.o=b}async*[Symbol.asyncIterator](a){w(a);for await(const b of F(this.g,a))yield b;for(const b of this.o)yield b}};class kb extends D{constructor(a,b,c){super();this.M=a;this.U=b;this.j=c}async*[Symbol.asyncIterator](a){w(a);const b=[];for await(const c of F(this.U,a))b.push(c);for await(const c of F(this.M,a))-1===await S(b,c,this.j)&&(b.push(c),yield c)}};class lb extends D{constructor(a,b){super();this.g=a;this.i=b}async*[Symbol.asyncIterator](a){w(a);const b=[this.g];for(;0<b.length;){var c=b.shift();for await(const d of F(c,a))c=await this.i(d,a),b.push(c),yield d}}};class mb extends D{constructor(a,b,c){super();this.g=a;this.D=b;this.G=c}async*[Symbol.asyncIterator](a){w(a);let b=0;for await(const c of F(this.g,a))await this.D.call(this.G,c,b++)&&(yield c)}};class nb extends D{constructor(a,b){super();this.g=a;this.ga=b}async*[Symbol.asyncIterator](a){w(a);try{for await(const b of F(this.g,a))yield b}finally{await this.ga()}}};class ob extends D{constructor(a,b,c){super();this.g=a;this.i=b;this.G=c}async*[Symbol.asyncIterator](a){w(a);var b=this.g;const c=this.i,d=this.G;let f=0;for await(const g of F(b,a)){b=await c.call(d,g,f++,a);for await(const h of F(b,a))yield h}}}function pb(a,b){return function(c){return new ob(c,a,b)}};class qb extends D{constructor(a,b){super();this.g=a;this.ka=b}async *_flatten(a,b,c){if(0===b)for await(const d of F(a,c))yield d;else for await(const d of F(a,c))if(l(d)&&k(d[Symbol.asyncIterator]))for await(const f of this._flatten(d,b-1,c))yield f;else yield d}[Symbol.asyncIterator](a){w(a);return this._flatten(this.g,this.ka,a)[Symbol.asyncIterator]()}};async function rb(a,b,c,d){const f=new Map;for await(const h of F(a,d)){var g=await b(h,d);a=f.get(g);f.has(g)||(a=[],f.set(g,a));g=await c(h,d);a.push(g)}return f};class sb extends D{constructor(a,b){super();this.key=a;this.g=b}async*[Symbol.asyncIterator](a){w(a);for(const b of this.g)yield b}}class tb extends D{constructor(a,b,c){super();this.g=a;this.u=b;this.ma=c}async*[Symbol.asyncIterator](a){w(a);a=await rb(this.g,this.u,this.ma,a);for(const [b,c]of a)yield new sb(b,c)}};class ub extends D{constructor(a,b,c,d,f){super();this.R=a;this.N=b;this.S=c;this.O=d;this.T=f}async*[Symbol.asyncIterator](a){w(a);const b=await rb(this.N,this.O,t,a);for await(const d of F(this.R,a)){var c=await this.S(d,a);c=b.has(c)?b.get(c):new va;yield await this.T(d,ja(c),a)}}};class vb extends D{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){w(a);for await(const b of F(this.g,a));}};class wb extends D{constructor(a,b,c,d,f){super();this.R=a;this.N=b;this.S=c;this.O=d;this.T=f}async*[Symbol.asyncIterator](a){w(a);const b=await rb(this.N,this.O,t,a);for await(const c of F(this.R,a)){const d=await this.S(c,a);if(b.has(d))for(const f of b.get(d))yield await this.T(c,f,a)}}};async function xb(a,b,c,d){w(d);b=await S(a,b,c);if(-1===b)return!1;a.splice(b,1);return!0}class yb extends D{constructor(a,b,c){super();this.M=a;this.U=b;this.j=c}async*[Symbol.asyncIterator](a){const b=[];for await(const c of F(this.U,a))b.push(c);for await(const c of F(this.M,a))await xb(b,c,this.j,a)&&(yield c)}};function T(a,b){return a>b?1:a<b?-1:0};class zb extends D{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){w(a);a=await Oa(this.g,a);const b=a.length,c=Array(b);for(let d=0;d<b;d++)c[d]=d;c.sort(this._getSorter(a));for(const d of c)yield a[d]}thenBy(a,b=T){return new U(this.g,a,b,!1,this)}thenByDescending(a,b=T){return new U(this.g,a,b,!0,this)}}
class U extends zb{constructor(a,b,c,d,f){super(a);this.u=b;this.j=c;this.la=d;this.sa=f}_getSorter(a,b){const c=a.map(this.u),d=this.j,f=this.sa,g=this.la,h=(n,p)=>{const q=d(c[n],c[p]);return 0===q?b?b(n,p):n-p:g?-q:q};return f?f._getSorter(a,h):h}};class Ab extends D{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){w(a);let b,c=!1;for await(const d of F(this.g,a))c?yield[b,d]:c=!0,b=d}};function Bb(a,b){return c=>{var d=c;for(c=0;c<b;c++)if(d=d[a[c]],"undefined"===typeof d)return;return d}};class Cb extends D{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](a){w(a);if(-1===this.h)for(;;)for await(var b of F(this.g,a))yield b;else for(b=0;b<this.h;b++)for await(const c of F(this.g,a))yield c}};let V;function Db(a){return a instanceof W?a:"string"===typeof a?new V([a]):r(a)||m(a)?new V(a):new V([a])};class W{forEach(a,b){a=da(a,b);b=0;for(const c of this)a(c,b++)}A(...a){let b=-1;const c=a.length;let d=this;for(;++b<c;)d=a[b](Db(d));return d}}W.prototype[Symbol.toStringTag]="IterableX";Object.defineProperty(W,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"IterableX"!==a[Symbol.toStringTag])}});
(function(a){V=class extends a{constructor(b){super();this.g=b;this.m=t}*[Symbol.iterator](){let b=0;if(r(this.g))for(var c of this.g)yield this.m(c,b++);else for(c=Math.min(Math.max(ea(this.g.length),0),fa);b<c;)yield this.m(this.g[b],b++)}}})(W);
try{(a=>{if(!a){W.prototype.pipe=function(...c){let d=-1;const f=c.length;let g=this,h;for(;++d<f;)if(h=c[d],"function"===typeof h)g=h(Db(g));else if(ca(h))return{end:c=!0}=c[d+1]||{},ba(g)?g.A(h,{end:c}):Db(g).za(b(h)).A(h,{end:c});return g};var b=(c,d=c.va||{ya:!0})=>d}})("object"===typeof window&&"object"===typeof document&&9===document.nodeType)}catch(a){};class Eb extends W{constructor(a){super();this.o=a}*[Symbol.iterator](){yield*this.o}};class Fb extends W{constructor(a,b){super();this.g=a;this.h=b}*[Symbol.iterator](){if(-1===this.h)for(;;)for(var a of this.g)yield a;else for(a=0;a<this.h;a++)for(const b of this.g)yield b}};function Gb(a,b=-1){return new Fb(new Eb([a]),b)};class Hb extends D{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){w(a);const b=[];for await(const c of F(this.g,a))b.unshift(c);yield*b}};class Ib extends D{constructor(a,b){super();this.g=a;this.m=b.callback;this.H=b.hasOwnProperty("seed");this.V=b.seed}async*[Symbol.asyncIterator](a){w(a);let b=!1,c=this.V;const d=await Oa(this.g,a);for(let f=d.length-1;0<=f;f--){const g=d[f];b||(b=this.H)?(c=await this.m(c,g,f,a),yield c):(c=g,b=!0)}}};class Jb extends D{constructor(a,b){super();this.g=a;this.m=b.callback;this.H=b.hasOwnProperty("seed");this.V=b.seed}async*[Symbol.asyncIterator](a){w(a);let b=0,c=!1,d=this.V;for await(const f of F(this.g,a))c||(c=this.H)?(d=await this.m(d,f,b++,a),yield d):(d=f,c=!0,b++);1!==b||this.H||(yield d)}};class Kb extends D{constructor(a){super();this.pa={next(b){return a.next(b)}}}[Symbol.asyncIterator](a){w(a);return this.pa}};class Lb extends D{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](a){w(a);const b=[];for await(const c of F(this.g,a))b.push(c),b.length>this.h&&(yield b.shift())}};class Mb extends D{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](a){w(a);a=F(this.g,a)[Symbol.asyncIterator]();for(var b=this.h;0<b&&!(await a.next()).done;)b--;if(0>=b)for(;!(b=await a.next()).done;)yield b.value}};class Nb extends D{constructor(a,b){super();this.g=a;this.P=b}async*[Symbol.asyncIterator](a){w(a);let b=!1;this.P(a).then(()=>b=!0);for await(const c of F(this.g,a))b&&(yield c)}};class Ob extends D{constructor(a,b){super();this.g=a;this.D=b}async*[Symbol.asyncIterator](a){w(a);let b=!1,c=0;for await(const d of F(this.g,a))b||await this.D(d,c++,a)||(b=!0),b&&(yield d)}};class Pb extends D{constructor(a,b,c){super();this.g=a;this.ha=b;this.na=c}async*[Symbol.asyncIterator](a){w(a);a=F(this.g,a)[Symbol.asyncIterator]();for(var b=this.ha;0<b&&!(await a.next()).done;)b--;let c=this.na;if(0<c)for(;!(b=await a.next()).done&&(yield b.value,0!==--c););}};class Qb extends D{constructor(a,b){super();this.g=a;this.o=b}async*[Symbol.asyncIterator](a){w(a);for(const b of this.o)yield b;for await(const b of F(this.g,a))yield b}};class Rb extends D{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](a){w(a);if(0<this.h){const b=[];for await(const c of F(this.g,a))b.length>=this.h&&b.shift(),b.push(c);for(;0<b.length;)yield b.shift()}}};class Sb extends D{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](a){w(a);let b=this.h;if(0<b)for await(const c of F(this.g,a))if(yield c,0===--b)break}};class Tb extends D{constructor(a,b){super();this.g=a;this.P=b}async*[Symbol.asyncIterator](a){w(a);const b=this.P(a).then(()=>{});for(a=F(this.g,a)[Symbol.asyncIterator]();;){var c=a.next();c=await K([b,c]);if(void 0===c||c.done)break;yield c.value}}};class Ub extends D{constructor(a,b){super();this.g=a;this.D=b}async*[Symbol.asyncIterator](a){w(a);let b=0;for await(const c of F(this.g,a)){if(!await this.D(c,b++,a))break;yield c}}};class Vb extends D{constructor(a,b){super();this.g=a;this.B=b}async*[Symbol.asyncIterator](a){w(a);for(a=F(this.g,a)[Symbol.asyncIterator]();;){let b;try{b=await a.next()}catch(c){if(c instanceof v)throw c;this.B.error&&await this.B.error(c);throw c;}if(b.done){this.B.complete&&await this.B.complete();break}this.B.next&&await this.B.next(b.value);yield b.value}}};class Wb extends D{constructor(a,b){super();this.g=a;this.X=b}async*[Symbol.asyncIterator](a){w(a);let b;for await(const c of F(this.g,a))if(a=Date.now(),!b||a-b>this.X)b=a,yield c}};class Xb extends D{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){w(a);let b=Date.now();for await(const c of F(this.g,a)){a=Date.now();const d=a-b;b=a;yield{value:c,Aa:d}}}};class X extends Error{constructor(a="Timeout has occurred"){super(a);Object.setPrototypeOf(this,X.prototype);Error.captureStackTrace(this,this.constructor);this.name="TimeoutError"}get [Symbol.toStringTag](){return"TimeoutError"}}Object.defineProperty(X,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return l(a)&&("TimeoutError"===a.constructor.name||"TimeoutError"===a[Symbol.toStringTag])}});
class Yb extends D{constructor(a,b){super();this.g=a;this.s=b}async*[Symbol.asyncIterator](a){w(a);const b=F(this.g,a)[Symbol.asyncIterator]();for(;;){const {type:c,value:d}=await K([b.next().then(f=>({type:"value",value:f})),M(this.s,a).then(()=>({type:"error"}))]);if("error"===c)throw new X;if(!d||d.done)break;yield d.value}}};class Zb extends D{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){w(a);for await(const b of F(this.g,a))yield{time:Date.now(),value:b}}};class $b extends D{constructor(a,b,c){super();this.qa=a;this.ta=b;this.j=c}async*[Symbol.asyncIterator](a){w(a);const b=[];for await(const c of F(this.qa,a))-1===await S(b,c,this.j)&&(b.push(c),yield c);for await(const c of F(this.ta,a))-1===await S(b,c,this.j)&&(b.push(c),yield c)}};const ac=new Promise(()=>{});function Y(a,b){return a.then(c=>({value:c,index:b}))}
class bc extends D{constructor(a,b){super();this.g=a;this.ba=b}async*[Symbol.asyncIterator](a){w(a);const b=this.ba.length;var c=b+1;const d=Array(c);c=Array(c);let f=!1;const g=Array(b),h=Array(b);g.fill(!1);for(let n=0;n<b;n++){const p=F(this.ba[n],a)[Symbol.asyncIterator]();d[n]=p;c[n]=Y(p.next(),n)}a=F(this.g,a)[Symbol.asyncIterator]();d[b]=a;for(c[b]=Y(a.next(),b);;){a=K(c);const {value:{value:n,done:p},index:q}=await a;if(q===b){if(p)break;c[q]=Y(d[q].next(),q);f&&(yield[n,...h])}else p?c[q]=
ac:(h[q]=n,g[q]=!0,f=g.every(t),c[q]=Y(d[q].next(),q))}}};var Z={};Z.BatchAsyncIterable=la;Z.BufferAsyncIterable=ma;Z.CatchWithAsyncIterable=bb;Z.ConcatAllAsyncIterable=cb;Z.DebounceAsyncIterable=db;Z.DefaultIfEmptyAsyncIterable=eb;Z.DelayAsyncIterable=gb;Z.DelayEachAsyncIterable=fb;Z.DistinctAsyncIterable=hb;Z.DistinctUntilChangedAsyncIterable=ib;Z.EndWithAsyncIterable=jb;Z.ExceptAsyncIterable=kb;Z.ExpandAsyncIterable=lb;Z.FilterAsyncIterable=mb;Z.FinallyAsyncIterable=nb;Z.FlatMapAsyncIterable=ob;Z.FlattenAsyncIterable=qb;Z.GroupByAsyncIterable=tb;
Z.GroupJoinAsyncIterable=ub;Z.GroupedAsyncIterable=sb;Z.IgnoreElementsAsyncIterable=vb;Z.IntersectAsyncIterable=yb;Z.JoinAsyncIterable=wb;Z.MapAsyncIterable=Ya;Z.MemoizeAsyncBuffer=H;Z.OrderedAsyncIterableBaseX=zb;Z.OrderedAsyncIterableX=U;Z.PairwiseAsyncIterable=Ab;Z.RepeatAsyncIterable=Cb;Z.ReverseAsyncIterable=Hb;Z.ScanAsyncIterable=Jb;Z.ScanRightAsyncIterable=Ib;Z.SkipAsyncIterable=Mb;Z.SkipLastAsyncIterable=Lb;Z.SkipUntilAsyncIterable=Nb;Z.SkipWhileAsyncIterable=Ob;Z.SliceAsyncIterable=Pb;
Z.StartWithAsyncIterable=Qb;Z.TakeAsyncIterable=Sb;Z.TakeLastAsyncIterable=Rb;Z.TakeUntilAsyncIterable=Tb;Z.TakeWhileAsyncIterable=Ub;Z.TapAsyncIterable=Vb;Z.ThrottleAsyncIterable=Wb;Z.TimeIntervalAsyncIterable=Xb;Z.TimeoutAsyncIterable=Yb;Z.TimeoutError=X;Z.TimestampAsyncIterable=Zb;Z.UnionAsyncIterable=$b;Z.WithAbortAsyncIterable=E;Z.WithLatestFromAsyncIterable=bc;Z.batch=function(){return function(a){return new la(a)}};
Z.buffer=function(a,b){let c=b;null==c&&(c=a);return function(d){return new ma(d,a,c)}};Z.bufferCountOrTime=function(a,b){return function(c){return new ab(c,a,b)}};Z.catchError=function(a){return function(b){return new bb(b,a)}};Z.combineLatestWith=function(...a){return function(b){return new ua([b,...a])}};Z.concatAll=function(){return function(a){return new cb(a)}};Z.concatWith=function(...a){return function(b){return new L([b,...a])}};Z.debounce=function(a){return function(b){return new db(b,a)}};
Z.defaultIfEmpty=function(a){return function(b){return new eb(b,a)}};Z.delay=function(a){return function(b){return new gb(b,a)}};Z.delayEach=function(a){return function(b){return new fb(b,a)}};Z.distinct=function(a){return function(b){const {["keySelector"]:c=u,["comparer"]:d=N}=a||{};return new hb(b,c,d)}};Z.distinctUntilChanged=function(a){return function(b){const {["keySelector"]:c=u,["comparer"]:d=N}=a||{};return new ib(b,c,d)}};
Z.doWhile=function(a){return function(b){return new L([b,new Wa(a,b)])}};Z.endWith=function(...a){return function(b){return new jb(b,a)}};Z.except=function(a,b=N){return function(c){return new kb(c,a,b)}};Z.expand=function(a){return function(b){return new lb(b,a)}};Z.filter=function(a,b){return function(c){return new mb(c,a,b)}};Z.finalize=function(a){return function(b){return new nb(b,a)}};Z.flat=function(a=Infinity){return function(b){return new qb(b,a)}};Z.flatMap=pb;
Z.groupBy=function(a,b=u){return function(c){return new tb(c,a,b)}};Z.groupJoin=function(a,b,c,d){return function(f){return new ub(f,a,b,c,d)}};Z.ignoreElements=function(){return function(a){return new vb(a)}};Z.innerJoin=function(a,b,c,d){return function(f){return new wb(f,a,b,c,d)}};Z.intersect=function(a,b=N){return function(c){return new yb(c,a,b)}};Z.map=Za;Z.memoize=pa;Z.mergeAll=function(){return function(a){return C(a).pipe(pb(b=>b))}};
Z.mergeWith=function(...a){return function(b){return new Ia([b,...a])}};Z.orderBy=function(a,b=T){return function(c){return new U(c,a,b,!1)}};Z.orderByDescending=function(a,b=T){return function(c){return new U(c,a,b,!0)}};Z.pairwise=function(){return function(a){return new Ab(a)}};Z.pluck=function(...a){return function(b){return Za(Bb(a,a.length))(b)}};Z.publish=O;Z.raceWith=function(...a){return function(b){return new Na([b,...a])}};Z.repeat=function(a=-1){return function(b){return new Cb(b,a)}};
Z.retry=function(a=-1){return function(b){return new qa(Gb(b,a))}};Z.reverse=function(){return function(a){return new Hb(a)}};Z.scan=function(a){return function(b){return new Jb(b,a)}};Z.scanRight=function(a){return function(b){return new Ib(b,a)}};Z.share=function(a){return function(b){return a?new G(async c=>(await a(new Kb(b[Symbol.asyncIterator](c)),c))[Symbol.asyncIterator](c)):new Kb(b[Symbol.asyncIterator]())}};Z.skip=function(a){return function(b){return new Mb(b,a)}};
Z.skipLast=function(a){return function(b){return new Lb(b,a)}};Z.skipUntil=function(a){return function(b){return new Nb(b,a)}};Z.skipWhile=function(a){return function(b){return new Ob(b,a)}};Z.slice=function(a,b=Infinity){return function(c){return new Pb(c,a,b)}};Z.startWith=function(...a){return function(b){return new Qb(b,a)}};Z.take=function(a){return function(b){return new Sb(b,a)}};Z.takeLast=function(a){return function(b){return new Rb(b,a)}};
Z.takeUntil=function(a){return function(b){return new Tb(b,a)}};Z.takeWhile=function(a){return function(b){return new Ub(b,a)}};Z.tap=function(a,b,c){return function(d){return new Vb(d,Va(a,b,c))}};Z.thenBy=function(a,b=T){return function(c){return new U(c.g,a,b,!1,c)}};Z.thenByDescending=function(a,b=T){return function(c){return new U(c.g,a,b,!0,c)}};Z.throttle=function(a){return function(b){return new Wb(b,a)}};Z.timeInterval=function(){return function(a){return new Xb(a)}};
Z.timeout=function(a){return function(b){return new Yb(b,a)}};Z.timestamp=function(){return function(a){return new Zb(a)}};Z.toDOMStream=function(a){return function(b){return P(b,a)}};Z.union=function(a,b=N){return function(c){return new $b(c,a,b)}};Z.withAbort=function(a){return function(b){return new E(b,a)}};Z.withLatestFrom=function(...a){return function(b){return new bc(b,a)}};Z.wrapWithAbort=F;Z.zipWith=function(...a){return function(b){return new Xa([b,...a])}};e.prototype[Symbol.toStringTag]="__await";Object.defineProperty(e,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"__await"!==a[Symbol.toStringTag])}});Object.assign(arguments[0],Z);}.bind(this))));

//# sourceMappingURL=Ix.dom.asynciterable.operators.esnext.min.js.map
