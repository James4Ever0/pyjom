(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
    typeof define === 'function' && define.amd ? define(['IxAsynciterable'], factory) :
    (factory(global.IxAsynciterable = global.IxAsynciterable || {}));
}(this, (function (exports) {/*
 *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
*****************************************************************************/
'use strict';function h(a){return this instanceof h?this:new h(a)};function l(a){return a}async function n(a){return a};function aa(a,b){return"undefined"===typeof b?a:function(c,d){return a.call(b,c,d)}};const p=a=>"function"===typeof a,q=a=>null!=a&&Object(a)===a;function t(a){return null!=a&&Object(a)===a&&"function"===typeof a.subscribe};const ba=Math.pow(2,53)-1;class u{constructor(){this.C=!1;this.J=[];this.s=[]}[Symbol.asyncIterator](){return this}write(a){this._push({type:"value",value:a})}error(a){this._push({type:"error",error:a})}_push(a){if(this.C)throw Error("AsyncSink already ended");if(0<this.s.length){const {resolve:b,reject:c}=this.s.shift();"error"===a.type?c(a.error):b({done:!1,value:a.value})}else this.J.push(a)}next(){if(0<this.J.length){const {type:a,value:b,error:c}=this.J.shift();return"error"===a?Promise.reject(c):Promise.resolve({done:!1,
value:b})}return this.C?Promise.resolve({done:!0}):new Promise((a,b)=>{this.s.push({resolve:a,reject:b})})}end(){for(;0<this.s.length;)this.s.shift().resolve({done:!0});this.C=!0}};class w extends Error{constructor(a="The operation has been aborted"){super(a);Object.setPrototypeOf(this,w.prototype);Error.captureStackTrace(this,this.constructor);this.name="AbortError"}get [Symbol.toStringTag](){return"AbortError"}}function x(a){if(a&&a.aborted)throw new w;}Object.defineProperty(w,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return q(a)&&("AbortError"===a.constructor.name||"AbortError"===a[Symbol.toStringTag])}});let y,z,A,B,C;
function D(a){y=function(b,c=n,d){c=aa(c,d);if(null!=b&&p(b[Symbol.iterator])||q(b)&&p(b[Symbol.asyncIterator]))return new A(b,c);if(q(b)&&p(b.then))return new B(b,c);if(t(b))return new C(b,c);if(q(b)&&"number"===typeof b.length)return new z(b,c);if(q(b)&&!p(b[Symbol.iterator])&&p(b.next))return new A({[Symbol.asyncIterator]:()=>b},c);throw new TypeError("Input type not supported");};z=class extends a{constructor(b,c){super();this.g=b;this.j=c}async*[Symbol.asyncIterator](){let b=0;var c=Number(this.g.length);
for(c=Math.min(Math.max(isNaN(c)?0:0!==c&&isFinite(c)?(0<c?1:-1)*Math.floor(Math.abs(c)):c,0),ba);b<c;)yield await this.j(this.g[b],b++)}};A=class extends a{constructor(b,c){super();this.g=b;this.j=c}async*[Symbol.asyncIterator](){let b=0;for await(const c of this.g)yield await this.j(c,b++)}};B=class extends a{constructor(b,c){super();this.g=b;this.j=c}async*[Symbol.asyncIterator](){const b=await this.g;yield await this.j(b,0)}};C=class extends a{constructor(b,c){super();this.V=b;this.j=c}async*[Symbol.asyncIterator](b){function c(){d.error(new w)}
x(b);const d=new u,e=this.V.subscribe({next(g){d.write(g)},error(g){d.error(g)},complete(){d.end()}});b&&b.addEventListener("abort",c);let f=0;try{for(let g;!(g=await d.next()).done;)x(b),yield await this.j(g.value,f++)}finally{b&&b.removeEventListener("abort",c),e.unsubscribe()}}}};class ca{constructor(a,b){this.g=a;this.I=b}[Symbol.asyncIterator](){return this.g[Symbol.asyncIterator](this.I)}}class E{async forEach(a,b,c){const d=c?new ca(this,c):this;let e=0;for await(const f of d)await a.call(b,f,e++,c)}pipe(...a){let b=-1;const c=a.length;let d=this;for(;++b<c;)d=a[b](F(d));return d}}E.prototype[Symbol.toStringTag]="AsyncIterableX";Object.defineProperty(E,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"AsyncIterableX"!==a[Symbol.toStringTag])}});D(E);
try{(a=>{if(!a){E.prototype.pipe=function(...c){let d=-1;const e=c.length;let f=this,g;for(;++d<e;)if(g=c[d],"function"===typeof g)f=g(F(f));else if(q(g)&&p(g.end)&&p(g._write)&&"boolean"===typeof g.writable&&q(g._writableState))return{end:c=!0}=c[d+1]||{},q(f)&&p(f.pipe)&&p(f._read)&&"boolean"===typeof f.readable&&q(f._readableState)?f.pipe(g,{end:c}):F(f).$(b(g)).pipe(g,{end:c});return f};var b=(c,d=c.Y||{Z:!0})=>d}})("object"===typeof window&&"object"===typeof document&&9===document.nodeType)}catch(a){};function F(a){return a instanceof E?a:"string"===typeof a?new z([a],n):null!=a&&p(a[Symbol.iterator])||q(a)&&p(a[Symbol.asyncIterator])?new A(a,n):q(a)&&p(a.then)?new B(a,n):t(a)?new C(a,n):q(a)&&"number"===typeof a.length?new z(a,n):new z([a],n)};class da{constructor(){this.h=[]}clear(){this.h=[]}get count(){return this.h.length}get(a){return this.h[a]}push(a){this.h.push(a)}done(){}}
class ea{constructor(){this.v=this.i=0;this.h=new Map}clear(){this.h.clear()}get count(){return this.i}get R(){return this.v}set R(a){this.v=a}done(){this.v--}get(a){if(!this.h.has(a))throw Error("Element no longer available in the buffer.");const b=this.h.get(a),c=b.value;0===--b.count&&this.h.delete(a);return c}push(a){this.h.set(this.i++,{value:a,count:this.v})}};class fa extends E{constructor(a){super();this.D=a}async*[Symbol.asyncIterator](a){x(a);a=await this.D(a);let b;for(;!(b=await a.next()).done;)yield b.value}};async function*G(a,b=0){--b;let c=!1;const d=a.B;try{do if(++b<d.count)yield d.get(b);else{if(a.N)throw a.u;null===a.A&&(a.A=a.g.next().then(e=>{a.A=null;e.done||d.push(e.value);return e}));({done:c}=await a.A.catch(e=>{a.u=e;a.N=!0;throw e;}));c||(yield d.get(b))}while(!c)}finally{d.done()}}class H extends E{constructor(a,b){super();this.A=this.u=null;this.N=!1;this.g=a;this.B=b}[Symbol.asyncIterator](a){x(a);return G(this,0)}}
function I(){return function(a){return new H(a[Symbol.asyncIterator](),new da)}};class ha extends E{constructor(a,b){super();this.g=a;this.I=b}[Symbol.asyncIterator](){return this.g[Symbol.asyncIterator](this.I)}}function J(a,b){return b?new ha(a,b):a};async function K(a){"function"===typeof a.return&&await a.return()};class L extends E{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){x(a);let b=null,c=!1;for(const d of this.g){const e=J(d,a)[Symbol.asyncIterator]();b=null;for(c=!1;;){let f={};try{const {done:g,value:k}=await e.next();if(g){await K(e);break}f=k}catch(g){b=g;c=!0;await K(e);break}yield f}if(!c)break}if(c)throw b;}};function M(a){return null===a||"object"!==typeof a&&"function"!==typeof a}const N=new WeakMap;
function O(a){let b;return(new Promise((c,d)=>{b={resolve:c,reject:d};for(const e of a){if(M(e)){Promise.resolve(e).then(c,d);continue}let f=N.get(e);void 0===f?(f={m:new Set([b]),L:!1},N.set(e,f),Promise.resolve(e).then(g=>{for(const {resolve:k}of f.m)k(g);f.m.clear();f.L=!0},g=>{for(const {reject:k}of f.m)k(g);f.m.clear();f.L=!0})):f.L?Promise.resolve(e).then(c,d):f.m.add(b)}})).finally(()=>{for(const c of a)M(c)||N.get(c).m.delete(b)})};const ia=new Promise(()=>{});function P(a,b){return a.then(c=>({value:c,index:b}))}
class Q extends E{constructor(a){super();this.l=a}async*[Symbol.asyncIterator](a){x(a);const b=this.l.length,c=Array(b),d=Array(b);let e=!1;const f=Array(b),g=Array(b);let k=b;g.fill(!1);for(let m=0;m<b;m++){const r=J(this.l[m],a)[Symbol.asyncIterator]();c[m]=r;d[m]=P(r.next(),m)}for(;0<k;){a=O(d);const {value:{value:m,done:r},index:v}=await a;if(r)d[v]=ia,k--;else if(f[v]=m,g[v]=!0,d[v]=P(c[v].next(),v),e||(e=g.every(l)))yield f}}};class R extends E{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){x(a);for(const b of this.g)for await(const c of J(b,a))yield c}};class ja extends E{constructor(a){super();this.D=a}async*[Symbol.asyncIterator](a){x(a);const b=await this.D(a);for await(const c of J(b,a))yield c}}function ka(a){return new ja(a)};class la extends E{async*[Symbol.asyncIterator](a){x(a)}}function ma(){return new la};const na=new Promise(()=>{});function oa(a,b){return a.then(c=>({value:c,index:b}))};const pa="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;class S extends E{constructor(a){super();this.O=a}[Symbol.asyncIterator](){const a=this.O,b=a.getReader();return qa(a,b,ra(b))}}class sa extends S{[Symbol.asyncIterator](){var a=this.O;let b;try{b=a.getReader({mode:"byob"})}catch(c){return super[Symbol.asyncIterator]()}a=qa(a,b,ta(b));a.next();return a}}
async function*qa(a,b,c){let d=!1;try{yield*c}catch(e){(d=!0,b)&&await b.cancel(e)}finally{if(b&&(d||await b.cancel(),a.locked))try{b.closed.catch(()=>{}),b.releaseLock()}catch(e){}}}async function*ra(a){let b;for(;!(b=await a.read()).done;)yield b.value}async function*ta(a){var b;for(b=yield null;!(b=await ua(a,b)).done;)b=yield b.value}
async function ua(a,b){let c;if("number"===typeof b)c=new ArrayBuffer(b);else if(b instanceof ArrayBuffer)b=(c=b).byteLength;else if(b instanceof pa)b=(c=b).byteLength;else return{done:!0,value:void 0};return await va(a,c,0,b)}async function va(a,b,c,d){if(c>=d)return{done:!1,value:new Uint8Array(b,0,d)};const {done:e,value:f}=await a.read(new Uint8Array(b,c,d-c));return(c+=f.byteLength)<d&&!e?await va(a,f.buffer,c,d):{done:e,value:new Uint8Array(f.buffer,0,c)}}
function T(a,b){return b&&"byob"===b.mode?new sa(a):new S(a)};function U(a,b){const c=new u,d=e=>c.write(e);a(d);return I()(async function*(){for(let e;!(e=await c.next()).done;)yield e.value;b(d);c.end()}())};class wa extends E{constructor(a,b,c,d){super();this.F=a;this.o=b;this.G=c;this.H=d}async*[Symbol.asyncIterator](a){x(a);for(let b=this.F;await this.o(b,a);b=await this.G(b,a))yield await this.H(b,a)}};function xa(a,b){return new Promise((c,d)=>{function e(){clearTimeout(f);d(new w)}b&&b.aborted&&d(new w);const f=setTimeout(()=>{if(b&&(b.removeEventListener("abort",e),b.aborted)){e();return}c()},a);b&&b.addEventListener("abort",e,{once:!0})})};class ya extends E{constructor(a,b,c,d,e){super();this.F=a;this.o=b;this.G=c;this.H=d;this.W=e}async*[Symbol.asyncIterator](a){x(a);for(let b=this.F;await this.o(b,a);b=await this.G(b,a)){const c=await this.W(b,a);await xa(c,a);yield await this.H(b,a)}}};async function za(a,b){return a===b||"number"===typeof a&&"number"===typeof b&&isNaN(a)&&isNaN(b)}async function V(a,b){return a>b?1:a<b?-1:0};class Aa extends E{constructor(a){super();this.U=a}async*[Symbol.asyncIterator](a){x(a);let b=0;for(;;)await xa(this.U,a),yield b++}};async function Ba(a,b,c,d){x(d);let e=[];a=J(a,d)[Symbol.asyncIterator]();const {value:f,done:g}=await a.next();if(g)throw Error("Sequence contains no elements");let k=await b(f,d);e.push(f);for(var m;!(m=await a.next()).done;){m=m.value;const r=await b(m,d),v=await c(r,k,d);0===v?e.push(m):0<v&&(e=[m],k=r)}return e};const Ca=new Promise(()=>{});function Da(a,b){return a.then(c=>({value:c,index:b}))}class Ea extends E{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){x(a);const b=this.g.length,c=Array(b),d=Array(b);let e=b;for(let f=0;f<b;f++){const g=J(this.g[f],a)[Symbol.asyncIterator]();c[f]=g;d[f]=Da(g.next(),f)}for(;0<e;){a=O(d);const {value:{done:f,value:g},index:k}=await a;f?(d[k]=Ca,e--):(d[k]=Da(c[k].next(),k),yield g)}}};class Fa extends E{constructor(){super()}async*[Symbol.asyncIterator](a){x(a);await new Promise((b,c)=>{a&&a.addEventListener("abort",()=>c(new w),{once:!0})})}};class Ga extends E{constructor(a){super();this.T=a}async*[Symbol.asyncIterator](a){x(a);for(const b of this.T)yield b}};class Ha extends E{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){x(a);for(const b of this.g){const c=J(b,a)[Symbol.asyncIterator]();for(;;){let d;try{d=await c.next()}catch(e){break}if(d.done)break;yield d.value}}}};function Ia(a,b){return a.then(c=>({value:c,index:b}))}class Ja extends E{constructor(a){super();this.l=a}async*[Symbol.asyncIterator](a){x(a);var b=this.l,c=b.length;const d=Array(c);var e=Array(c);for(let k=0;k<c;k++){const m=J(b[k],a)[Symbol.asyncIterator]();d[k]=m;e[k]=Ia(m.next(),k)}a=O(e);const {value:f,index:g}=await a;f.done||(yield f.value);a=d[g];for(b=0;b<c;b++)b!==g&&(e=d[b],e.return&&e.return());for(;!(c=await a.next()).done;)yield c.value}};class Ka extends E{constructor(a,b){super();this.M=a;this.i=b}async*[Symbol.asyncIterator](a){x(a);for(let b=this.M,c=this.M+this.i;b<c;b++)yield b}};async function La(a,b){x(b);const c=[];for await(const d of J(a,b))c.push(d);return c};class Ma extends E{constructor(a,b){super();this.P=a;this.i=b}async*[Symbol.asyncIterator](a){if(-1===this.i)for(;;)x(a),yield this.P;else for(let b=0;b<this.i;b++)x(a),yield this.P}};class Na extends E{constructor(a){super();this.u=a}async*[Symbol.asyncIterator](a){x(a);throw this.u;}};class Oa extends H{constructor(a){super(a,new ea)}[Symbol.asyncIterator](a){x(a);this.B.R++;return G(this,this.B.count)[Symbol.asyncIterator]()}}function Pa(){return function(a){return new Oa(a[Symbol.asyncIterator]())}};function Qa(a,b,c=0,d=b.byteLength){const e=a.byteLength;a=new Uint8Array(a.buffer,a.byteOffset,e);b=new Uint8Array(b.buffer,b.byteOffset,Math.min(d,e,b.buffer.byteLength-b.byteOffset));a.set(b,c);return b.byteLength}class Ra{constructor(a){this.g=a}async cancel(){const a=this.g;a&&a.return&&await a.return();this.g=null}}class Sa extends Ra{async pull(a){var b=this.g;if(b&&(b=await b.next(a.desiredSize),!b.done))return a.enqueue(b.value);a.close()}}
class Ta extends Ra{constructor(a,b={}){super(a);this.type="bytes";this.autoAllocateChunkSize=b.autoAllocateChunkSize;this.X=new Sa(a)}async pull(a){if(!a.byobRequest)return await this.X.pull(a);if(this.g){const b=a.byobRequest.view,{done:c,value:d}=await this.g.next(b);if(!c){if("number"===typeof d)return a.byobRequest.respond(d);if(ArrayBuffer.isView(d))return d.buffer===b.buffer?a.byobRequest.respondWithNewView(d):a.byobRequest.respond(Qa(b,d))}}a.close()}}
const Ua=(()=>{let a,b,c=(e,f)=>{class g extends ReadableStream{[Symbol.asyncIterator](){return T(this)[Symbol.asyncIterator]()}}class k extends ReadableStream{[Symbol.asyncIterator](){return T(this,{mode:"byob"})[Symbol.asyncIterator]()}}a=k;b=g;c=d;return d(e,f)};const d=(e,f)=>e instanceof Ta?new a(e,f):new b(e,f);return(e,f)=>c(e,f)})();function W(a,b){return b&&"type"in b&&"bytes"===b.type?Ua(new Ta(a[Symbol.asyncIterator](),b),b):Ua(new Sa(a[Symbol.asyncIterator]()),b)}E.prototype.tee=function(){return X(this).tee()};
E.prototype.pipeTo=function(a,b){return X(this).pipeTo(a,b)};E.prototype.pipeThrough=function(a,b){return X(this).pipeThrough(a,b)};function X(a){return a.S||(a.S=a.pipe(Pa(),W))}function Va(a){return a?W(this,a):W(this)}E.prototype.toDOMStream=Va;const Y=()=>{};function Wa(a,b,c){return a&&"object"===typeof a?{next:p(a.next)?d=>a.next(d):Y,error:p(a.error)?d=>a.error(d):Y,complete:p(a.complete)?()=>a.complete():Y}:{next:p(a)?a:Y,error:p(b)?b:Y,complete:p(c)?c:Y}};class Xa{constructor(){this.K=!1}unsubscribe(){this.K=!0}}class Ya{constructor(a){this.g=a}["function"===typeof Symbol&&Symbol.observable||"@@observable"](){return this}subscribe(a,b,c){const d=Wa(a,b,c),e=new Xa,f=this.g[Symbol.asyncIterator](),g=()=>{f.next().then(({value:k,done:m})=>{e.K||(m?d.complete():(d.next(k),g()))}).catch(k=>{e.K||d.error(k)})};g();return e}};class Za extends E{constructor(a,b){super();this.o=a;this.g=b}async*[Symbol.asyncIterator](a){for(x(a);await this.o(a);)for await(const b of J(this.g,a))yield b}};class $a extends E{constructor(a){super();this.l=a}async*[Symbol.asyncIterator](a){x(a);const b=this.l.length,c=this.l.map(d=>J(d,a)[Symbol.asyncIterator]());for(;0<b;){const d=Array(b);for(let e=-1;++e<b;){const {value:f,done:g}=await c[e].next();if(g){await Promise.all(c.map(K));return}d[e]=f}yield d}}};var Z={get FromArrayIterable(){return z},get FromAsyncIterable(){return A},get FromObservableAsyncIterable(){return C},get FromPromiseIterable(){return B},get from(){return y}};Z.AsyncIterableReadableByteStream=sa;Z.AsyncIterableReadableStream=S;Z.AsyncIterableX=E;Z.AsyncSink=u;Z.CatchAllAsyncIterable=L;Z.CombineLatestAsyncIterable=Q;Z.ConcatAsyncIterable=R;Z.MergeAsyncIterable=Ea;Z.NeverAsyncIterable=Fa;Z.OfAsyncIterable=Ga;Z.OnErrorResumeNextAsyncIterable=Ha;Z.RaceAsyncIterable=Ja;
Z.RepeatValueAsyncIterable=Ma;Z.ZipAsyncIterable=$a;Z._concatAll=function(a){return new R(a)};Z._initialize=D;Z.as=F;Z.asyncify=function(a){return function(...b){function c(...e){d.write(1===e.length?e[0]:e);d.end()}const d=new u;try{a(...b.concat(c))}catch(e){d.error(e),d.end()}return I()(async function*(){for(let e;!(e=await d.next()).done;)yield e.value}())}};
Z.asyncifyErrback=function(a){return function(...b){function c(e,...f){e?d.error(e):d.write(1===f.length?f[0]:f);d.end()}const d=new u;try{a(...b.concat(c))}catch(e){d.error(e),d.end()}return I()(async function*(){for(let e;!(e=await d.next()).done;)yield e.value}())}};Z.average=async function(a,b){const {["selector"]:c=n,["signal"]:d,["thisArg"]:e}=b||{};x(d);let f=b=0;for await(const g of J(a,d))b+=await c.call(e,g,d),f++;if(0===f)throw Error("Empty collection");return b/f};Z.catchAll=function(a){return new L(a)};
Z.catchError=function(...a){return new L(a)};Z.combineLatest=function(...a){return new Q(a)};Z.concat=function(...a){return new R(a)};Z.count=async function(a,b){const {["signal"]:c,["thisArg"]:d,["predicate"]:e=async()=>!0}=b||{};x(c);b=0;for await(const f of J(a,c))await e.call(d,f,b,c)&&b++;return b};Z.create=function(a){return new fa(a)};Z.defer=ka;Z.elementAt=async function(a,b,c){x(c);for await(const d of J(a,c)){if(0===b)return d;b--}};Z.empty=ma;
Z.every=async function(a,b){const {["signal"]:c,["thisArg"]:d,["predicate"]:e}=b;x(c);b=0;for await(const f of J(a,c))if(!await e.call(d,f,b++,c))return!1;return!0};Z.find=async function(a,b){const {["signal"]:c,["thisArg"]:d,["predicate"]:e}=b;x(c);b=0;for await(const f of J(a,c))if(await e.call(d,f,b++,c))return f};Z.findIndex=async function(a,b){const {["signal"]:c,["thisArg"]:d,["predicate"]:e}=b;x(c);b=0;for await(const f of J(a,c))if(await e.call(d,f,b++,c))return b;return-1};
Z.first=async function(a,b){const {["signal"]:c,["thisArg"]:d,["predicate"]:e=async()=>!0}=b||{};x(c);b=0;for await(const f of J(a,c))if(await e.call(d,f,b++,c))return f};
Z.forkJoin=async function(...a){let b=a.shift();b instanceof AbortSignal||(a.unshift(b),b=void 0);const c=a.length,d=Array(c),e=Array(c);let f=c;const g=Array(c),k=Array(c);k.fill(!1);for(let m=0;m<c;m++){const r=J(a[m],b)[Symbol.asyncIterator]();d[m]=r;e[m]=oa(r.next(),m)}for(;0<f;){a=O(e);const {value:m,index:r}=await a;m.done?(e[r]=na,f--):(e[r]=oa(d[r].next(),r),k[r]=!0,g[r]=m.value)}if(0<k.length&&k.every(l))return g};Z.fromDOMStream=T;
Z.fromEvent=function(a,b,c){if(a&&"function"===typeof a.addEventListener&&"function"===typeof a.removeEventListener)return U(d=>a.addEventListener(b,d,c),d=>a.removeEventListener(b,d,c));if(a&&"function"===typeof a.addListener&&"function"===typeof a.removeListener)return U(d=>a.addListener(b,d),d=>a.removeListener(b,d));throw new TypeError("Unsupported event target");};Z.fromEventPattern=U;Z.generate=function(a,b,c,d){return new wa(a,b,c,d)};
Z.generateTime=function(a,b,c,d,e){return new ya(a,b,c,d,e)};Z.iif=function(a,b,c=ma()){return ka(async d=>await a(d)?b:c)};Z.includes=async function(a,b,c=0,d){x(d);let e=0;Math.abs(c)&&(c=0);for await(const f of J(a,d))if(e++>c&&(f===b||"number"===typeof f&&"number"===typeof b&&isNaN(f)&&isNaN(b)))return!0;return!1};Z.interval=function(a){return new Aa(a)};Z.isEmpty=async function(a,b){x(b);for await(const c of J(a,b))return!1;return!0};
Z.last=async function(a,b){const {["signal"]:c,["thisArg"]:d,["predicate"]:e=async()=>!0}=b||{};x(c);b=0;let f;for await(const g of J(a,c))await e.call(d,g,b++,c)&&(f=g);return f};Z.max=async function(a,b){const {["comparer"]:c=V,["signal"]:d,["selector"]:e=n}=b||{};x(d);a=J(a,d)[Symbol.asyncIterator]();var f=await a.next();if(f.done)throw Error("Sequence contains no elements");for(b=await e(f.value);!(f=await a.next()).done;)f=await e(f.value),0<await c(f,b)&&(b=f);return b};
Z.maxBy=function(a,b){const {["comparer"]:c=V,["selector"]:d,["signal"]:e}=b||{};return Ba(a,d,c,e)};Z.merge=function(a,...b){return new Ea([a,...b])};Z.min=async function(a,b){const {["comparer"]:c=V,["signal"]:d,["selector"]:e=n}=b||{};x(d);a=J(a,d)[Symbol.asyncIterator]();var f=await a.next();if(f.done)throw Error("Sequence contains no elements");for(b=await e(f.value);!(f=await a.next()).done;)f=await e(f.value),0>await c(f,b)&&(b=f);return b};
Z.minBy=function(a,b){const {["comparer"]:c=V,["selector"]:d,["signal"]:e}=b||{};return Ba(a,d,async(f,g)=>-await c(f,g),e)};Z.never=function(){return new Fa};Z.of=function(...a){return new Ga(a)};Z.onErrorResumeNext=function(...a){return new Ha(a)};Z.pipe=function(a,...b){return 0===b.length?a instanceof E?a:y(a):(c=>b.reduce((d,e)=>e(d),c))(a)};Z.race=function(...a){return new Ja(a)};Z.range=function(a,b){return new Ka(a,b)};
Z.reduce=async function(a,b){const {["seed"]:c,["signal"]:d,["callback"]:e}=b;b=b.hasOwnProperty("seed");x(d);let f=0,g=!1,k=c;for await(const m of J(a,d))g||(g=b)?k=await e(k,m,f++,d):(k=m,g=!0,f++);if(!b&&!g)throw Error("Sequence contains no elements");return k};
Z.reduceRight=async function(a,b){const {["seed"]:c,["signal"]:d,["callback"]:e}=b;b=b.hasOwnProperty("seed");x(d);a=await La(a,d);let f=!1,g=c;for(let k=a.length-1;0<=k;k--){const m=a[k];f||(f=b)?g=await e(g,m,k,d):(g=m,f=!0)}if(!b&&!f)throw Error("Sequence contains no elements");return g};Z.repeatValue=function(a,b=-1){return new Ma(a,b)};
Z.sequenceEqual=async function(a,b,c){const {["comparer"]:d=za,["signal"]:e}=c||{};x(e);a=J(a,e)[Symbol.asyncIterator]();b=J(b,e)[Symbol.asyncIterator]();let f;for(;!(c=await a.next()).done;)if((f=await b.next()).done||!await d(c.value,f.value))return!1;return!!(await b.next()).done};
Z.single=async function(a,b){const {["signal"]:c,["thisArg"]:d,["predicate"]:e=async()=>!0}=b||{};x(c);let f;b=!1;let g=0;for await(const k of J(a,c)){if(b&&await e.call(d,k,g++,c))throw Error("More than one element was found");await e.call(d,k,g++,c)&&(f=k,b=!0)}return f};Z.some=async function(a,b){const {["signal"]:c,["thisArg"]:d,["predicate"]:e}=b;x(c);b=0;for await(const f of J(a,c))if(await e.call(d,f,b++,c))return!0;return!1};
Z.sum=async function(a,b){const {["selector"]:c=n,["signal"]:d,["thisArg"]:e}=b||{};x(d);b=0;for await(const f of J(a,d))b+=await c.call(e,f,d);return b};Z.throwError=function(a){return new Na(a)};Z.toArray=La;Z.toDOMStream=W;Z.toDOMStreamProto=Va;Z.toMap=async function(a,b){const {["signal"]:c,["elementSelector"]:d=n,["keySelector"]:e=n}=b||{};x(c);b=new Map;for await(const f of J(a,c)){a=await d(f,c);const g=await e(f,c);b.set(g,a)}return b};Z.toObservable=function(a){return new Ya(a)};
Z.toSet=async function(a,b){x(b);const c=new Set;for await(const d of J(a,b))c.add(d);return c};Z.whileDo=function(a,b){return new Za(b,a)};Z.zip=function(...a){return new $a(a)};h.prototype[Symbol.toStringTag]="__await";Object.defineProperty(h,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"__await"!==a[Symbol.toStringTag])}});Object.assign(arguments[0],Z);}.bind(this))));

//# sourceMappingURL=Ix.dom.asynciterable.esnext.min.js.map
