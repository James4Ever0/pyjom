{"version":3,"sources":["iterable/operators/finalize.ts"],"names":[],"mappings":";;;AAAA,4CAAyC;AAGzC,MAAa,eAAyB,SAAQ,qBAAkB;IACtD,OAAO,CAAoB;IAC3B,OAAO,CAAa;IAE5B,YAAY,MAAyB,EAAE,MAAkB;QACvD,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;IACxB,CAAC;IAED,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC;QAChB,IAAI;YACF,KAAK,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC;SACrB;gBAAS;YACR,IAAI,CAAC,OAAO,EAAE,CAAC;SAChB;IACH,CAAC;CACF;AAjBD,0CAiBC;AAED;;;;;;;GAOG;AACH,SAAgB,QAAQ,CAAU,MAAkB;IAClD,OAAO,SAAS,uBAAuB,CAAC,MAAyB;QAC/D,OAAO,IAAI,eAAe,CAAU,MAAM,EAAE,MAAM,CAAC,CAAC;IACtD,CAAC,CAAC;AACJ,CAAC;AAJD,4BAIC","file":"finalize.js","sourcesContent":["import { IterableX } from '../iterablex';\nimport { MonoTypeOperatorFunction } from '../../interfaces';\n\nexport class FinallyIterable<TSource> extends IterableX<TSource> {\n  private _source: Iterable<TSource>;\n  private _action: () => void;\n\n  constructor(source: Iterable<TSource>, action: () => void) {\n    super();\n    this._source = source;\n    this._action = action;\n  }\n\n  *[Symbol.iterator]() {\n    try {\n      yield* this._source;\n    } finally {\n      this._action();\n    }\n  }\n}\n\n/**\n *  Invokes a specified asynchronous action after the source iterable sequence terminates gracefully or exceptionally.\n *\n * @template TSource The type of the elements in the source sequence.\n * @param {(() => void)} action Action to invoke and await asynchronously after the source iterable sequence terminates\n * @returns {MonoTypeOperatorFunction<TSource>} An operator that returns the source sequence with the\n * action-invoking termination behavior applied.\n */\nexport function finalize<TSource>(action: () => void): MonoTypeOperatorFunction<TSource> {\n  return function finallyOperatorFunction(source: Iterable<TSource>): IterableX<TSource> {\n    return new FinallyIterable<TSource>(source, action);\n  };\n}\n"]}