{"version":3,"file":"event-stream-manager.js","sourceRoot":"","sources":["../../../../src/server/event-stream-manager.ts"],"names":[],"mappings":"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"}